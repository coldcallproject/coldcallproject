{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport { isArray, isNil } from '../../../services/predicate';\nimport { keys } from '../../../services';\nimport { EuiPopover, EuiPopoverTitle } from '../../popover';\nimport { EuiFieldSearch } from '../../form/field_search';\nimport { EuiFilterButton, EuiFilterSelectItem } from '../../filter_group';\nimport { EuiLoadingChart } from '../../loading';\nimport { EuiSpacer } from '../../spacer';\nimport { EuiIcon } from '../../icon';\nimport { Query } from '../query';\nimport { Operator } from '../query/ast';\nvar defaults = {\n  config: {\n    multiSelect: true,\n    filterWith: 'prefix',\n    loadingMessage: 'Loading...',\n    noOptionsMessage: 'No options found',\n    searchThreshold: 10\n  }\n};\nexport var FieldValueSelectionFilter = /*#__PURE__*/function (_Component) {\n  _inherits(FieldValueSelectionFilter, _Component);\n\n  var _super = _createSuper(FieldValueSelectionFilter);\n\n  function FieldValueSelectionFilter(props) {\n    var _this;\n\n    _classCallCheck(this, FieldValueSelectionFilter);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItems\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInput\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveOptionsLoader\", function () {\n      var options = _this.props.config.options;\n\n      if (isArray(options)) {\n        return function () {\n          return Promise.resolve(options);\n        };\n      }\n\n      return function () {\n        var cachedOptions = _this.state.cachedOptions;\n\n        if (cachedOptions) {\n          return Promise.resolve(cachedOptions);\n        }\n\n        return options().then(function (opts) {\n          // If a cache time is set, populate the cache and also schedule a\n          // cache reset.\n          if (_this.props.config.cache != null && _this.props.config.cache > 0) {\n            _this.setState({\n              cachedOptions: opts\n            });\n\n            setTimeout(function () {\n              _this.setState({\n                cachedOptions: null\n              });\n            }, _this.props.config.cache);\n          }\n\n          return opts;\n        });\n      };\n    });\n\n    var _options = props.config.options;\n    var preloadedOptions = isArray(_options) ? {\n      all: _options,\n      shown: _options\n    } : null;\n    _this.selectItems = [];\n    _this.state = {\n      popoverOpen: false,\n      error: null,\n      options: preloadedOptions\n    };\n    return _this;\n  }\n\n  _createClass(FieldValueSelectionFilter, [{\n    key: \"closePopover\",\n    value: function closePopover() {\n      this.setState({\n        popoverOpen: false\n      });\n    }\n  }, {\n    key: \"onButtonClick\",\n    value: function onButtonClick() {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        if (!prevState.popoverOpen) {\n          // loading options updates the state, so we'll do that in the animation frame\n          window.requestAnimationFrame(function () {\n            _this2.loadOptions();\n          });\n        }\n\n        return {\n          options: null,\n          error: null,\n          popoverOpen: !prevState.popoverOpen\n        };\n      });\n    }\n  }, {\n    key: \"loadOptions\",\n    value: function loadOptions() {\n      var _this3 = this;\n\n      var loader = this.resolveOptionsLoader();\n      this.setState({\n        options: null,\n        error: null\n      });\n      loader().then(function (options) {\n        var items = {\n          on: [],\n          off: [],\n          rest: []\n        };\n        var _this3$props = _this3.props,\n            query = _this3$props.query,\n            config = _this3$props.config;\n\n        var multiSelect = _this3.resolveMultiSelect();\n\n        if (options) {\n          options.forEach(function (op) {\n            var optionField = op.field || config.field;\n\n            if (optionField) {\n              var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, op.value) : query.getSimpleFieldClause(optionField, op.value);\n\n              var checked = _this3.resolveChecked(clause);\n\n              if (!checked) {\n                items.rest.push(op);\n              } else if (checked === 'on') {\n                items.on.push(op);\n              } else {\n                items.off.push(op);\n              }\n            }\n\n            return;\n          });\n        }\n\n        _this3.setState({\n          error: null,\n          options: {\n            all: options,\n            shown: [].concat(_toConsumableArray(items.on), _toConsumableArray(items.off), _toConsumableArray(items.rest))\n          }\n        });\n      }).catch(function () {\n        _this3.setState({\n          options: null,\n          error: 'Could not load options'\n        });\n      });\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions() {\n      var _this4 = this;\n\n      var q = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.setState(function (prevState) {\n        if (isNil(prevState.options)) {\n          return {};\n        }\n\n        var predicate = _this4.getOptionFilter();\n\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          options: _objectSpread(_objectSpread({}, prevState.options), {}, {\n            shown: prevState.options.all.filter(function (option, i, options) {\n              var name = _this4.resolveOptionName(option).toLowerCase();\n\n              var query = q.toLowerCase();\n              return predicate(name, query, options);\n            })\n          })\n        });\n      });\n    }\n  }, {\n    key: \"getOptionFilter\",\n    value: function getOptionFilter() {\n      var filterWith = this.props.config.filterWith || defaults.config.filterWith;\n\n      if (typeof filterWith === 'function') {\n        return filterWith;\n      }\n\n      if (filterWith === 'includes') {\n        return function (name, query) {\n          return name.includes(query);\n        };\n      }\n\n      return function (name, query) {\n        return name.startsWith(query);\n      };\n    }\n  }, {\n    key: \"resolveOptionName\",\n    value: function resolveOptionName(option) {\n      return option.name || option.value.toString();\n    }\n  }, {\n    key: \"onOptionClick\",\n    value: function onOptionClick(field, value, checked) {\n      var multiSelect = this.resolveMultiSelect();\n      var _this$props$config = this.props.config,\n          _this$props$config$au = _this$props$config.autoClose,\n          autoClose = _this$props$config$au === void 0 ? true : _this$props$config$au,\n          _this$props$config$op = _this$props$config.operator,\n          operator = _this$props$config$op === void 0 ? Operator.EQ : _this$props$config$op; // we're closing popover only if the user can only select one item... if the\n      // user can select more, we'll leave it open so she can continue selecting\n\n      if (!multiSelect && autoClose) {\n        this.closePopover();\n\n        var _query = checked ? this.props.query.removeSimpleFieldClauses(field) : this.props.query.removeSimpleFieldClauses(field).addSimpleFieldValue(field, value, true, operator);\n\n        this.props.onChange(_query);\n      } else {\n        if (multiSelect === 'or') {\n          var _query2 = checked ? this.props.query.removeOrFieldValue(field, value) : this.props.query.addOrFieldValue(field, value, true, operator);\n\n          this.props.onChange(_query2);\n        } else {\n          var _query3 = checked ? this.props.query.removeSimpleFieldValue(field, value) : this.props.query.addSimpleFieldValue(field, value, true, operator);\n\n          this.props.onChange(_query3);\n        }\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(index, event) {\n      switch (event.key) {\n        case keys.ARROW_DOWN:\n          if (index < this.selectItems.length - 1) {\n            event.preventDefault();\n            this.selectItems[index + 1].focus();\n          }\n\n          break;\n\n        case keys.ARROW_UP:\n          if (index < 0) {\n            return; // it's coming from the search box... nothing to do... nowhere to go\n          }\n\n          if (index === 0 && this.searchInput) {\n            event.preventDefault();\n            this.searchInput.focus();\n          } else if (index > 0) {\n            event.preventDefault();\n            this.selectItems[index - 1].focus();\n          }\n\n      }\n    }\n  }, {\n    key: \"resolveMultiSelect\",\n    value: function resolveMultiSelect() {\n      var config = this.props.config;\n      return !isNil(config.multiSelect) ? config.multiSelect : defaults.config.multiSelect;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props = this.props,\n          index = _this$props.index,\n          query = _this$props.query,\n          config = _this$props.config;\n      var multiSelect = this.resolveMultiSelect();\n      var activeTop = this.isActiveField(config.field);\n      var activeItem = this.state.options ? this.state.options.all.some(function (item) {\n        return _this5.isActiveField(item.field);\n      }) : false;\n      var active = activeTop || activeItem;\n      var button = /*#__PURE__*/React.createElement(EuiFilterButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: this.onButtonClick.bind(this),\n        hasActiveFilters: active,\n        grow: true\n      }, config.name);\n      var searchBox = this.renderSearchBox();\n      var content = this.renderContent(config.field, query, config, multiSelect);\n      return /*#__PURE__*/React.createElement(EuiPopover, {\n        id: \"\".concat(config.type, \"_\").concat(index),\n        button: button,\n        isOpen: this.state.popoverOpen,\n        closePopover: this.closePopover.bind(this),\n        panelPaddingSize: \"none\",\n        anchorPosition: \"downCenter\",\n        panelClassName: \"euiFilterGroup__popoverPanel\"\n      }, searchBox, content);\n    }\n  }, {\n    key: \"renderSearchBox\",\n    value: function renderSearchBox() {\n      var _this6 = this;\n\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n\n      if (this.state.options && this.state.options.all.length >= threshold) {\n        var disabled = this.state.error != null;\n        return /*#__PURE__*/React.createElement(EuiPopoverTitle, {\n          paddingSize: \"s\"\n        }, /*#__PURE__*/React.createElement(EuiFieldSearch, {\n          inputRef: function inputRef(ref) {\n            return _this6.searchInput = ref;\n          },\n          disabled: disabled,\n          incremental: true,\n          onSearch: function onSearch(query) {\n            return _this6.filterOptions(query);\n          },\n          onKeyDown: this.onKeyDown.bind(this, -1),\n          compressed: true\n        }));\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(field, query, config, multiSelect) {\n      var _this7 = this;\n\n      if (this.state.error) {\n        return this.renderError(this.state.error);\n      }\n\n      if (isNil(this.state.options)) {\n        return this.renderLoader();\n      }\n\n      if (this.state.options.shown.length === 0) {\n        return this.renderNoOptions();\n      }\n\n      if (this.state.options == null) {\n        return;\n      }\n\n      var items = [];\n      this.state.options.shown.forEach(function (option, index) {\n        var optionField = option.field || field;\n\n        if (optionField == null) {\n          throw new Error('option.field or field should be provided in <FieldValueSelectionFilter/>');\n        }\n\n        var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, option.value) : query.getSimpleFieldClause(optionField, option.value);\n\n        var checked = _this7.resolveChecked(clause);\n\n        var onClick = function onClick() {\n          // clicking a checked item will uncheck it and effective remove the filter (value = undefined)\n          _this7.onOptionClick(optionField, option.value, checked);\n        };\n\n        var item = /*#__PURE__*/React.createElement(EuiFilterSelectItem, {\n          key: index,\n          checked: checked,\n          onClick: onClick,\n          ref: function ref(_ref) {\n            return _this7.selectItems[index] = _ref;\n          },\n          onKeyDown: _this7.onKeyDown.bind(_this7, index)\n        }, option.view ? option.view : _this7.resolveOptionName(option));\n        items.push(item);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__items\"\n      }, items);\n    }\n  }, {\n    key: \"resolveChecked\",\n    value: function resolveChecked(clause) {\n      if (clause) {\n        return Query.isMust(clause) ? 'on' : 'off';\n      }\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      var message = this.props.config.loadingMessage || defaults.config.loadingMessage;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiLoadingChart, {\n        size: \"m\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError(message) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiIcon, {\n        size: \"m\",\n        type: \"faceSad\",\n        color: \"danger\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderNoOptions\",\n    value: function renderNoOptions() {\n      var message = this.props.config.noOptionsMessage || defaults.config.noOptionsMessage;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiIcon, {\n        type: \"minusInCircle\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"isActiveField\",\n    value: function isActiveField(field) {\n      if (typeof field !== 'string') {\n        return false;\n      }\n\n      var query = this.props.query;\n      var multiSelect = this.resolveMultiSelect();\n\n      if (multiSelect === 'or') {\n        return query.hasOrFieldClause(field);\n      }\n\n      return query.hasSimpleFieldClause(field);\n    }\n  }]);\n\n  return FieldValueSelectionFilter;\n}(Component);\nFieldValueSelectionFilter.propTypes = {\n  index: PropTypes.number.isRequired,\n  config: PropTypes.shape({\n    type: PropTypes.oneOf([\"field_value_selection\"]).isRequired,\n    field: PropTypes.string,\n    name: PropTypes.string.isRequired,\n\n    /**\n       * See #FieldValueOptionType\n       */\n    options: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.shape({\n      field: PropTypes.string,\n      value: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired, PropTypes.bool.isRequired, PropTypes.shape({\n        type: PropTypes.oneOf([\"date\"]).isRequired,\n        raw: PropTypes.any.isRequired,\n        granularity: PropTypes.oneOfType([PropTypes.shape({\n          es: PropTypes.oneOf([\"d\", \"w\", \"M\", \"y\"]).isRequired,\n          js: PropTypes.oneOf([\"day\", \"week\", \"month\", \"year\"]).isRequired,\n          isSame: PropTypes.func.isRequired,\n          start: PropTypes.func.isRequired,\n          startOfNext: PropTypes.func.isRequired,\n          iso8601: PropTypes.func.isRequired\n        }).isRequired, PropTypes.oneOf([undefined])]).isRequired,\n        text: PropTypes.string.isRequired,\n        resolve: PropTypes.func.isRequired\n      }).isRequired]).isRequired,\n      name: PropTypes.string,\n      view: PropTypes.node\n    }).isRequired).isRequired, PropTypes.func.isRequired]).isRequired,\n    filterWith: PropTypes.oneOfType([PropTypes.oneOf([\"prefix\", \"includes\"]), PropTypes.func.isRequired]),\n    cache: PropTypes.number,\n    multiSelect: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.oneOf([\"and\", \"or\"])]),\n    loadingMessage: PropTypes.string,\n    noOptionsMessage: PropTypes.string,\n    searchThreshold: PropTypes.number,\n    available: PropTypes.func,\n    autoClose: PropTypes.bool,\n    operator: PropTypes.oneOf([\"eq\", \"exact\", \"gt\", \"gte\", \"lt\", \"lte\"])\n  }).isRequired,\n  query: PropTypes.any.isRequired,\n  onChange: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["/Users/inwoo/Projects/coldcallproject/coldcallproject/node_modules/@elastic/eui/es/components/search_bar/filters/field_value_selection_filter.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","call","slice","name","Array","from","test","iter","isArray","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","e","getPrototypeOf","React","Component","PropTypes","isNil","EuiPopover","EuiPopoverTitle","EuiFieldSearch","EuiFilterButton","EuiFilterSelectItem","EuiLoadingChart","EuiSpacer","EuiIcon","Query","Operator","defaults","config","multiSelect","filterWith","loadingMessage","noOptionsMessage","searchThreshold","FieldValueSelectionFilter","_Component","_super","_this","options","Promise","resolve","cachedOptions","state","then","opts","cache","setState","setTimeout","_options","preloadedOptions","all","shown","selectItems","popoverOpen","error","closePopover","onButtonClick","_this2","prevState","window","requestAnimationFrame","loadOptions","_this3","loader","resolveOptionsLoader","items","on","off","rest","_this3$props","query","resolveMultiSelect","op","optionField","field","clause","getOrFieldClause","getSimpleFieldClause","checked","resolveChecked","concat","catch","filterOptions","_this4","q","undefined","predicate","getOptionFilter","option","resolveOptionName","toLowerCase","includes","startsWith","onOptionClick","_this$props$config","_this$props$config$au","autoClose","_this$props$config$op","operator","EQ","_query","removeSimpleFieldClauses","addSimpleFieldValue","onChange","_query2","removeOrFieldValue","addOrFieldValue","_query3","removeSimpleFieldValue","onKeyDown","index","event","ARROW_DOWN","preventDefault","focus","ARROW_UP","searchInput","render","_this5","_this$props","activeTop","isActiveField","activeItem","some","item","active","button","createElement","iconType","iconSide","onClick","bind","hasActiveFilters","grow","searchBox","renderSearchBox","content","renderContent","id","type","isOpen","panelPaddingSize","anchorPosition","panelClassName","_this6","threshold","disabled","paddingSize","inputRef","ref","incremental","onSearch","compressed","_this7","renderError","renderLoader","renderNoOptions","Error","_ref","view","className","isMust","message","size","color","hasOrFieldClause","hasSimpleFieldClause","propTypes","number","isRequired","shape","oneOf","string","oneOfType","arrayOf","bool","raw","any","granularity","es","js","isSame","func","start","startOfNext","iso8601","text","node","available"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport { isArray, isNil } from '../../../services/predicate';\nimport { keys } from '../../../services';\nimport { EuiPopover, EuiPopoverTitle } from '../../popover';\nimport { EuiFieldSearch } from '../../form/field_search';\nimport { EuiFilterButton, EuiFilterSelectItem } from '../../filter_group';\nimport { EuiLoadingChart } from '../../loading';\nimport { EuiSpacer } from '../../spacer';\nimport { EuiIcon } from '../../icon';\nimport { Query } from '../query';\nimport { Operator } from '../query/ast';\nvar defaults = {\n  config: {\n    multiSelect: true,\n    filterWith: 'prefix',\n    loadingMessage: 'Loading...',\n    noOptionsMessage: 'No options found',\n    searchThreshold: 10\n  }\n};\nexport var FieldValueSelectionFilter = /*#__PURE__*/function (_Component) {\n  _inherits(FieldValueSelectionFilter, _Component);\n\n  var _super = _createSuper(FieldValueSelectionFilter);\n\n  function FieldValueSelectionFilter(props) {\n    var _this;\n\n    _classCallCheck(this, FieldValueSelectionFilter);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItems\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInput\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveOptionsLoader\", function () {\n      var options = _this.props.config.options;\n\n      if (isArray(options)) {\n        return function () {\n          return Promise.resolve(options);\n        };\n      }\n\n      return function () {\n        var cachedOptions = _this.state.cachedOptions;\n\n        if (cachedOptions) {\n          return Promise.resolve(cachedOptions);\n        }\n\n        return options().then(function (opts) {\n          // If a cache time is set, populate the cache and also schedule a\n          // cache reset.\n          if (_this.props.config.cache != null && _this.props.config.cache > 0) {\n            _this.setState({\n              cachedOptions: opts\n            });\n\n            setTimeout(function () {\n              _this.setState({\n                cachedOptions: null\n              });\n            }, _this.props.config.cache);\n          }\n\n          return opts;\n        });\n      };\n    });\n\n    var _options = props.config.options;\n    var preloadedOptions = isArray(_options) ? {\n      all: _options,\n      shown: _options\n    } : null;\n    _this.selectItems = [];\n    _this.state = {\n      popoverOpen: false,\n      error: null,\n      options: preloadedOptions\n    };\n    return _this;\n  }\n\n  _createClass(FieldValueSelectionFilter, [{\n    key: \"closePopover\",\n    value: function closePopover() {\n      this.setState({\n        popoverOpen: false\n      });\n    }\n  }, {\n    key: \"onButtonClick\",\n    value: function onButtonClick() {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        if (!prevState.popoverOpen) {\n          // loading options updates the state, so we'll do that in the animation frame\n          window.requestAnimationFrame(function () {\n            _this2.loadOptions();\n          });\n        }\n\n        return {\n          options: null,\n          error: null,\n          popoverOpen: !prevState.popoverOpen\n        };\n      });\n    }\n  }, {\n    key: \"loadOptions\",\n    value: function loadOptions() {\n      var _this3 = this;\n\n      var loader = this.resolveOptionsLoader();\n      this.setState({\n        options: null,\n        error: null\n      });\n      loader().then(function (options) {\n        var items = {\n          on: [],\n          off: [],\n          rest: []\n        };\n        var _this3$props = _this3.props,\n            query = _this3$props.query,\n            config = _this3$props.config;\n\n        var multiSelect = _this3.resolveMultiSelect();\n\n        if (options) {\n          options.forEach(function (op) {\n            var optionField = op.field || config.field;\n\n            if (optionField) {\n              var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, op.value) : query.getSimpleFieldClause(optionField, op.value);\n\n              var checked = _this3.resolveChecked(clause);\n\n              if (!checked) {\n                items.rest.push(op);\n              } else if (checked === 'on') {\n                items.on.push(op);\n              } else {\n                items.off.push(op);\n              }\n            }\n\n            return;\n          });\n        }\n\n        _this3.setState({\n          error: null,\n          options: {\n            all: options,\n            shown: [].concat(_toConsumableArray(items.on), _toConsumableArray(items.off), _toConsumableArray(items.rest))\n          }\n        });\n      }).catch(function () {\n        _this3.setState({\n          options: null,\n          error: 'Could not load options'\n        });\n      });\n    }\n  }, {\n    key: \"filterOptions\",\n    value: function filterOptions() {\n      var _this4 = this;\n\n      var q = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      this.setState(function (prevState) {\n        if (isNil(prevState.options)) {\n          return {};\n        }\n\n        var predicate = _this4.getOptionFilter();\n\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          options: _objectSpread(_objectSpread({}, prevState.options), {}, {\n            shown: prevState.options.all.filter(function (option, i, options) {\n              var name = _this4.resolveOptionName(option).toLowerCase();\n\n              var query = q.toLowerCase();\n              return predicate(name, query, options);\n            })\n          })\n        });\n      });\n    }\n  }, {\n    key: \"getOptionFilter\",\n    value: function getOptionFilter() {\n      var filterWith = this.props.config.filterWith || defaults.config.filterWith;\n\n      if (typeof filterWith === 'function') {\n        return filterWith;\n      }\n\n      if (filterWith === 'includes') {\n        return function (name, query) {\n          return name.includes(query);\n        };\n      }\n\n      return function (name, query) {\n        return name.startsWith(query);\n      };\n    }\n  }, {\n    key: \"resolveOptionName\",\n    value: function resolveOptionName(option) {\n      return option.name || option.value.toString();\n    }\n  }, {\n    key: \"onOptionClick\",\n    value: function onOptionClick(field, value, checked) {\n      var multiSelect = this.resolveMultiSelect();\n      var _this$props$config = this.props.config,\n          _this$props$config$au = _this$props$config.autoClose,\n          autoClose = _this$props$config$au === void 0 ? true : _this$props$config$au,\n          _this$props$config$op = _this$props$config.operator,\n          operator = _this$props$config$op === void 0 ? Operator.EQ : _this$props$config$op; // we're closing popover only if the user can only select one item... if the\n      // user can select more, we'll leave it open so she can continue selecting\n\n      if (!multiSelect && autoClose) {\n        this.closePopover();\n\n        var _query = checked ? this.props.query.removeSimpleFieldClauses(field) : this.props.query.removeSimpleFieldClauses(field).addSimpleFieldValue(field, value, true, operator);\n\n        this.props.onChange(_query);\n      } else {\n        if (multiSelect === 'or') {\n          var _query2 = checked ? this.props.query.removeOrFieldValue(field, value) : this.props.query.addOrFieldValue(field, value, true, operator);\n\n          this.props.onChange(_query2);\n        } else {\n          var _query3 = checked ? this.props.query.removeSimpleFieldValue(field, value) : this.props.query.addSimpleFieldValue(field, value, true, operator);\n\n          this.props.onChange(_query3);\n        }\n      }\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(index, event) {\n      switch (event.key) {\n        case keys.ARROW_DOWN:\n          if (index < this.selectItems.length - 1) {\n            event.preventDefault();\n            this.selectItems[index + 1].focus();\n          }\n\n          break;\n\n        case keys.ARROW_UP:\n          if (index < 0) {\n            return; // it's coming from the search box... nothing to do... nowhere to go\n          }\n\n          if (index === 0 && this.searchInput) {\n            event.preventDefault();\n            this.searchInput.focus();\n          } else if (index > 0) {\n            event.preventDefault();\n            this.selectItems[index - 1].focus();\n          }\n\n      }\n    }\n  }, {\n    key: \"resolveMultiSelect\",\n    value: function resolveMultiSelect() {\n      var config = this.props.config;\n      return !isNil(config.multiSelect) ? config.multiSelect : defaults.config.multiSelect;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props = this.props,\n          index = _this$props.index,\n          query = _this$props.query,\n          config = _this$props.config;\n      var multiSelect = this.resolveMultiSelect();\n      var activeTop = this.isActiveField(config.field);\n      var activeItem = this.state.options ? this.state.options.all.some(function (item) {\n        return _this5.isActiveField(item.field);\n      }) : false;\n      var active = activeTop || activeItem;\n      var button = /*#__PURE__*/React.createElement(EuiFilterButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: this.onButtonClick.bind(this),\n        hasActiveFilters: active,\n        grow: true\n      }, config.name);\n      var searchBox = this.renderSearchBox();\n      var content = this.renderContent(config.field, query, config, multiSelect);\n      return /*#__PURE__*/React.createElement(EuiPopover, {\n        id: \"\".concat(config.type, \"_\").concat(index),\n        button: button,\n        isOpen: this.state.popoverOpen,\n        closePopover: this.closePopover.bind(this),\n        panelPaddingSize: \"none\",\n        anchorPosition: \"downCenter\",\n        panelClassName: \"euiFilterGroup__popoverPanel\"\n      }, searchBox, content);\n    }\n  }, {\n    key: \"renderSearchBox\",\n    value: function renderSearchBox() {\n      var _this6 = this;\n\n      var threshold = this.props.config.searchThreshold || defaults.config.searchThreshold;\n\n      if (this.state.options && this.state.options.all.length >= threshold) {\n        var disabled = this.state.error != null;\n        return /*#__PURE__*/React.createElement(EuiPopoverTitle, {\n          paddingSize: \"s\"\n        }, /*#__PURE__*/React.createElement(EuiFieldSearch, {\n          inputRef: function inputRef(ref) {\n            return _this6.searchInput = ref;\n          },\n          disabled: disabled,\n          incremental: true,\n          onSearch: function onSearch(query) {\n            return _this6.filterOptions(query);\n          },\n          onKeyDown: this.onKeyDown.bind(this, -1),\n          compressed: true\n        }));\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(field, query, config, multiSelect) {\n      var _this7 = this;\n\n      if (this.state.error) {\n        return this.renderError(this.state.error);\n      }\n\n      if (isNil(this.state.options)) {\n        return this.renderLoader();\n      }\n\n      if (this.state.options.shown.length === 0) {\n        return this.renderNoOptions();\n      }\n\n      if (this.state.options == null) {\n        return;\n      }\n\n      var items = [];\n      this.state.options.shown.forEach(function (option, index) {\n        var optionField = option.field || field;\n\n        if (optionField == null) {\n          throw new Error('option.field or field should be provided in <FieldValueSelectionFilter/>');\n        }\n\n        var clause = multiSelect === 'or' ? query.getOrFieldClause(optionField, option.value) : query.getSimpleFieldClause(optionField, option.value);\n\n        var checked = _this7.resolveChecked(clause);\n\n        var onClick = function onClick() {\n          // clicking a checked item will uncheck it and effective remove the filter (value = undefined)\n          _this7.onOptionClick(optionField, option.value, checked);\n        };\n\n        var item = /*#__PURE__*/React.createElement(EuiFilterSelectItem, {\n          key: index,\n          checked: checked,\n          onClick: onClick,\n          ref: function ref(_ref) {\n            return _this7.selectItems[index] = _ref;\n          },\n          onKeyDown: _this7.onKeyDown.bind(_this7, index)\n        }, option.view ? option.view : _this7.resolveOptionName(option));\n        items.push(item);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__items\"\n      }, items);\n    }\n  }, {\n    key: \"resolveChecked\",\n    value: function resolveChecked(clause) {\n      if (clause) {\n        return Query.isMust(clause) ? 'on' : 'off';\n      }\n    }\n  }, {\n    key: \"renderLoader\",\n    value: function renderLoader() {\n      var message = this.props.config.loadingMessage || defaults.config.loadingMessage;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiLoadingChart, {\n        size: \"m\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderError\",\n    value: function renderError(message) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiIcon, {\n        size: \"m\",\n        type: \"faceSad\",\n        color: \"danger\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"renderNoOptions\",\n    value: function renderNoOptions() {\n      var message = this.props.config.noOptionsMessage || defaults.config.noOptionsMessage;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__note\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"euiFilterSelect__noteContent\"\n      }, /*#__PURE__*/React.createElement(EuiIcon, {\n        type: \"minusInCircle\"\n      }), /*#__PURE__*/React.createElement(EuiSpacer, {\n        size: \"xs\"\n      }), /*#__PURE__*/React.createElement(\"p\", null, message)));\n    }\n  }, {\n    key: \"isActiveField\",\n    value: function isActiveField(field) {\n      if (typeof field !== 'string') {\n        return false;\n      }\n\n      var query = this.props.query;\n      var multiSelect = this.resolveMultiSelect();\n\n      if (multiSelect === 'or') {\n        return query.hasOrFieldClause(field);\n      }\n\n      return query.hasSimpleFieldClause(field);\n    }\n  }]);\n\n  return FieldValueSelectionFilter;\n}(Component);\nFieldValueSelectionFilter.propTypes = {\n  index: PropTypes.number.isRequired,\n  config: PropTypes.shape({\n    type: PropTypes.oneOf([\"field_value_selection\"]).isRequired,\n    field: PropTypes.string,\n    name: PropTypes.string.isRequired,\n\n    /**\n       * See #FieldValueOptionType\n       */\n    options: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.shape({\n      field: PropTypes.string,\n      value: PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired, PropTypes.bool.isRequired, PropTypes.shape({\n        type: PropTypes.oneOf([\"date\"]).isRequired,\n        raw: PropTypes.any.isRequired,\n        granularity: PropTypes.oneOfType([PropTypes.shape({\n          es: PropTypes.oneOf([\"d\", \"w\", \"M\", \"y\"]).isRequired,\n          js: PropTypes.oneOf([\"day\", \"week\", \"month\", \"year\"]).isRequired,\n          isSame: PropTypes.func.isRequired,\n          start: PropTypes.func.isRequired,\n          startOfNext: PropTypes.func.isRequired,\n          iso8601: PropTypes.func.isRequired\n        }).isRequired, PropTypes.oneOf([undefined])]).isRequired,\n        text: PropTypes.string.isRequired,\n        resolve: PropTypes.func.isRequired\n      }).isRequired]).isRequired,\n      name: PropTypes.string,\n      view: PropTypes.node\n    }).isRequired).isRequired, PropTypes.func.isRequired]).isRequired,\n    filterWith: PropTypes.oneOfType([PropTypes.oneOf([\"prefix\", \"includes\"]), PropTypes.func.isRequired]),\n    cache: PropTypes.number,\n    multiSelect: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.oneOf([\"and\", \"or\"])]),\n    loadingMessage: PropTypes.string,\n    noOptionsMessage: PropTypes.string,\n    searchThreshold: PropTypes.number,\n    available: PropTypes.func,\n    autoClose: PropTypes.bool,\n    operator: PropTypes.oneOf([\"eq\", \"exact\", \"gt\", \"gte\", \"lt\", \"lte\"])\n  }).isRequired,\n  query: PropTypes.any.isRequired,\n  onChange: PropTypes.func.isRequired\n};"]},"metadata":{},"sourceType":"module"}