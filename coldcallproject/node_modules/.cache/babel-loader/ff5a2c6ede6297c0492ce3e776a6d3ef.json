{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Elements within EuiComboBox which would normally be tabbable (inputs, buttons) have been removed\n * from the tab order with tabindex={-1} so that we can control the keyboard navigation interface.\n */\n\n/* eslint-disable jsx-a11y/role-has-required-aria-props */\n\n\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport { findPopoverPosition, htmlIdGenerator, keys } from '../../services';\nimport { EuiPortal } from '../portal';\nimport { EuiComboBoxOptionsList } from './combo_box_options_list';\nimport { getMatchingOptions, flattenOptionGroups, getSelectedOptionForSearchValue } from './matching_options';\nimport { EuiComboBoxInput } from './combo_box_input/combo_box_input';\nimport { getElementZIndex } from '../../services/popover';\nvar initialSearchValue = '';\nexport var EuiComboBox = /*#__PURE__*/function (_Component) {\n  _inherits(EuiComboBox, _Component);\n\n  var _super = _createSuper(EuiComboBox);\n\n  function EuiComboBox() {\n    var _this;\n\n    _classCallCheck(this, EuiComboBox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeOptionIndex: -1,\n      hasFocus: false,\n      isListOpen: false,\n      listElement: null,\n      listPosition: 'bottom',\n      listZIndex: undefined,\n      matchingOptions: getMatchingOptions(_this.props.options, _this.props.selectedOptions, initialSearchValue, _this.props.async, Boolean(_this.props.singleSelection), _this.props.sortMatchesBy),\n      searchValue: initialSearchValue,\n      width: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"rootId\", htmlIdGenerator());\n\n    _defineProperty(_assertThisInitialized(_this), \"comboBoxRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"comboBoxRefCallback\", function (ref) {\n      // IE11 doesn't support the `relatedTarget` event property for blur events\n      // but does add it for focusout. React doesn't support `onFocusOut` so here we are.\n      if (_this.comboBoxRefInstance) {\n        _this.comboBoxRefInstance.removeEventListener('focusout', _this.onContainerBlur);\n      }\n\n      _this.comboBoxRefInstance = ref;\n\n      if (_this.comboBoxRefInstance) {\n        _this.comboBoxRefInstance.addEventListener('focusout', _this.onContainerBlur);\n\n        var comboBoxBounds = _this.comboBoxRefInstance.getBoundingClientRect();\n\n        _this.setState({\n          width: comboBoxBounds.width\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"autoSizeInputRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"autoSizeInputRefCallback\", function (ref) {\n      _this.autoSizeInputRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInputRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInputRefCallback\", function (ref) {\n      _this.searchInputRefInstance = ref;\n      if (_this.props.inputRef) _this.props.inputRef(ref);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"listRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"listRefCallback\", function (ref) {\n      if (_this.comboBoxRefInstance) {\n        // find the zIndex of the combobox relative to the page body\n        // and use that to depth-position the list box\n        // adds an extra `100` to provide some defense around neighboring elements' positioning\n        var listZIndex = getElementZIndex(_this.comboBoxRefInstance, document.body) + 100;\n\n        _this.setState({\n          listZIndex: listZIndex\n        });\n      }\n\n      _this.listRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleButtonRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleButtonRefCallback\", function (ref) {\n      _this.toggleButtonRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"optionsRefInstances\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionRefCallback\", function (index, ref) {\n      _this.optionsRefInstances[index] = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openList\", function () {\n      _this.setState({\n        isListOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeList\", function (event) {\n      if (event && event.target === _this.searchInputRefInstance) {\n        // really long search values / custom entries triggers a scroll event on the input\n        // which the EuiComboBoxOptionsList passes through here\n        return;\n      }\n\n      _this.clearActiveOption();\n\n      _this.setState({\n        listZIndex: undefined,\n        isListOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updatePosition\", function () {\n      var listElement = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.listElement;\n\n      if (!_this._isMounted) {\n        return;\n      }\n\n      if (!_this.state.isListOpen) {\n        return;\n      }\n\n      if (!listElement) {\n        return;\n      } // it's possible that updateListPosition is called when listElement is becoming visible, but isn't yet\n\n\n      var listElementBounds = listElement.getBoundingClientRect();\n\n      if (listElementBounds.width === 0 || listElementBounds.height === 0) {\n        return;\n      }\n\n      if (!_this.comboBoxRefInstance) {\n        return;\n      }\n\n      var comboBoxBounds = _this.comboBoxRefInstance.getBoundingClientRect();\n\n      var _ref = findPopoverPosition({\n        allowCrossAxis: false,\n        anchor: _this.comboBoxRefInstance,\n        popover: listElement,\n        position: 'bottom'\n      }),\n          position = _ref.position,\n          top = _ref.top;\n\n      if (_this.listRefInstance) {\n        _this.listRefInstance.style.top = \"\".concat(top, \"px\"); // listElement doesn't have its width set until after updating the position\n        // which means the popover service won't know about the correct width\n        // however, we already know where to position the element\n\n        _this.listRefInstance.style.left = \"\".concat(comboBoxBounds.left + window.pageXOffset, \"px\");\n        _this.listRefInstance.style.width = \"\".concat(comboBoxBounds.width, \"px\");\n      } // Cache for future calls.\n\n\n      _this.setState({\n        listElement: listElement,\n        listPosition: position,\n        width: comboBoxBounds.width\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"incrementActiveOptionIndex\", function (amount) {\n      // If there are no options available, do nothing.\n      if (!_this.state.matchingOptions.length) {\n        return;\n      }\n\n      _this.setState(function (_ref2) {\n        var activeOptionIndex = _ref2.activeOptionIndex,\n            matchingOptions = _ref2.matchingOptions;\n        var nextActiveOptionIndex;\n\n        if (activeOptionIndex < 0) {\n          // If this is the beginning of the user's keyboard navigation of the menu, then we'll focus\n          // either the first or last item.\n          nextActiveOptionIndex = amount < 0 ? matchingOptions.length - 1 : 0;\n        } else {\n          nextActiveOptionIndex = activeOptionIndex + amount;\n\n          if (nextActiveOptionIndex < 0) {\n            nextActiveOptionIndex = matchingOptions.length - 1;\n          } else if (nextActiveOptionIndex === matchingOptions.length) {\n            nextActiveOptionIndex = 0;\n          }\n        } // Group titles are included in option list but are not selectable\n        // Skip group title options\n\n\n        var direction = amount > 0 ? 1 : -1;\n\n        while (matchingOptions[nextActiveOptionIndex].isGroupLabelOption) {\n          nextActiveOptionIndex = nextActiveOptionIndex + direction;\n\n          if (nextActiveOptionIndex < 0) {\n            nextActiveOptionIndex = matchingOptions.length - 1;\n          } else if (nextActiveOptionIndex === matchingOptions.length) {\n            nextActiveOptionIndex = 0;\n          }\n        }\n\n        return {\n          activeOptionIndex: nextActiveOptionIndex\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasActiveOption\", function () {\n      return _this.state.activeOptionIndex > -1 && _this.state.activeOptionIndex < _this.state.matchingOptions.length;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearActiveOption\", function () {\n      _this.setState({\n        activeOptionIndex: -1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSearchValue\", function () {\n      _this.onSearchChange('');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeLastOption\", function () {\n      if (!_this.props.selectedOptions.length) {\n        return;\n      } // Backspace will be used to delete the input, not a pill.\n\n\n      if (_this.state.searchValue.length) {\n        return;\n      } // Delete last pill.\n\n\n      _this.onRemoveOption(_this.props.selectedOptions[_this.props.selectedOptions.length - 1]);\n\n      if (Boolean(_this.props.singleSelection) && !_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addCustomOption\", function (isContainerBlur, searchValue) {\n      var _this$props = _this.props,\n          onCreateOption = _this$props.onCreateOption,\n          options = _this$props.options,\n          selectedOptions = _this$props.selectedOptions,\n          singleSelection = _this$props.singleSelection;\n      var matchingOptions = _this.state.matchingOptions;\n\n      if (_this.doesSearchMatchOnlyOption()) {\n        _this.onAddOption(matchingOptions[0], isContainerBlur);\n\n        return;\n      }\n\n      if (!onCreateOption) {\n        return;\n      } // Don't bother trying to create an option if the user hasn't typed anything.\n\n\n      if (!searchValue) {\n        return;\n      } // Don't create the value if it's already been selected.\n\n\n      if (getSelectedOptionForSearchValue(searchValue, selectedOptions)) {\n        return;\n      } // Add new custom pill if this is custom input, even if it partially matches an option.\n\n\n      var isOptionCreated = onCreateOption(searchValue, flattenOptionGroups(options)); // Expect the consumer to be explicit in rejecting a custom option.\n\n      if (isOptionCreated === false) {\n        return;\n      }\n\n      _this.clearSearchValue();\n\n      if (Boolean(singleSelection)) {\n        // Adding a custom option to a single select that does not appear in the list of options\n        _this.closeList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"doesSearchMatchOnlyOption\", function () {\n      var searchValue = _this.state.searchValue;\n\n      if (_this.state.matchingOptions.length !== 1) {\n        return false;\n      }\n\n      return _this.state.matchingOptions[0].label.toLowerCase() === searchValue.toLowerCase();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"areAllOptionsSelected\", function () {\n      var _this$props2 = _this.props,\n          options = _this$props2.options,\n          selectedOptions = _this$props2.selectedOptions,\n          async = _this$props2.async; // Assume if this is async then there could be infinite options.\n\n      if (async) {\n        return false;\n      }\n\n      var flattenOptions = flattenOptionGroups(options).map(function (option) {\n        return _objectSpread(_objectSpread({}, option), {}, {\n          label: option.label.trim().toLowerCase()\n        });\n      });\n      var numberOfSelectedOptions = 0;\n      selectedOptions.forEach(function (_ref3) {\n        var label = _ref3.label;\n        var trimmedLabel = label.trim().toLowerCase();\n        if (flattenOptions.findIndex(function (option) {\n          return option.label === trimmedLabel;\n        }) !== -1) numberOfSelectedOptions += 1;\n      });\n      return flattenOptions.length === numberOfSelectedOptions;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComboBoxFocus\", function (event) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n\n      _this.openList();\n\n      _this.setState({\n        hasFocus: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCustomOptions\", function (isContainerBlur) {\n      var searchValue = _this.state.searchValue;\n      var delimiter = _this.props.delimiter;\n\n      if (delimiter) {\n        searchValue.split(delimiter).forEach(function (option) {\n          if (option.length > 0) _this.addCustomOption(isContainerBlur, option);\n        });\n      } else {\n        _this.addCustomOption(isContainerBlur, searchValue);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onContainerBlur\", function (event) {\n      // close the options list, unless the use clicked on an option\n\n      /**\n       * FireFox returns `relatedTarget` as `null` for security reasons, but provides a proprietary `explicitOriginalTarget`.\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/explicitOriginalTarget\n       */\n      var focusEvent = event;\n      var relatedTarget = focusEvent.relatedTarget || focusEvent.explicitOriginalTarget;\n\n      var focusedInOptionsList = relatedTarget && _this.listRefInstance && _this.listRefInstance.contains(relatedTarget);\n\n      var focusedInInput = relatedTarget && _this.comboBoxRefInstance && _this.comboBoxRefInstance.contains(relatedTarget);\n\n      if (!focusedInOptionsList && !focusedInInput) {\n        _this.closeList();\n\n        if (_this.props.onBlur) {\n          _this.props.onBlur(event);\n        }\n\n        _this.setState({\n          hasFocus: false\n        }); // If the user tabs away or changes focus to another element, take whatever input they've\n        // typed and convert it into a pill, to prevent the combo box from looking like a text input.\n\n\n        if (!_this.hasActiveOption()) {\n          _this.setCustomOptions(true);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case keys.ARROW_UP:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.state.isListOpen) {\n            _this.incrementActiveOptionIndex(-1);\n          } else {\n            _this.openList();\n          }\n\n          break;\n\n        case keys.ARROW_DOWN:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.state.isListOpen) {\n            _this.incrementActiveOptionIndex(1);\n          } else {\n            _this.openList();\n          }\n\n          break;\n\n        case keys.BACKSPACE:\n          event.stopPropagation();\n\n          _this.removeLastOption();\n\n          break;\n\n        case keys.ESCAPE:\n          if (_this.state.isListOpen) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            _this.closeList();\n          }\n\n          break;\n\n        case keys.ENTER:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.hasActiveOption()) {\n            _this.onAddOption(_this.state.matchingOptions[_this.state.activeOptionIndex]);\n          } else {\n            _this.setCustomOptions(false);\n          }\n\n          break;\n\n        case keys.TAB:\n          // Disallow tabbing when the user is navigating the options.\n          if (_this.hasActiveOption() && _this.state.isListOpen) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n\n          break;\n\n        default:\n          if (_this.props.onKeyDown) {\n            _this.props.onKeyDown(event);\n          }\n\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionEnterKey\", function (option) {\n      _this.onAddOption(option);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionClick\", function (option) {\n      _this.onAddOption(option);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddOption\", function (addedOption, isContainerBlur) {\n      if (addedOption.disabled) {\n        return;\n      }\n\n      var _this$props3 = _this.props,\n          onChange = _this$props3.onChange,\n          selectedOptions = _this$props3.selectedOptions,\n          singleSelectionProp = _this$props3.singleSelection;\n      var singleSelection = Boolean(singleSelectionProp);\n      var changeOptions = singleSelection ? [addedOption] : selectedOptions.concat(addedOption);\n\n      if (onChange) {\n        onChange(changeOptions);\n      }\n\n      _this.clearSearchValue();\n\n      _this.clearActiveOption();\n\n      if (!isContainerBlur) {\n        if (_this.searchInputRefInstance) {\n          _this.searchInputRefInstance.focus();\n        }\n      }\n\n      if (singleSelection) {\n        requestAnimationFrame(function () {\n          return _this.closeList();\n        });\n      } else {\n        _this.setState({\n          activeOptionIndex: _this.state.matchingOptions.indexOf(addedOption)\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRemoveOption\", function (removedOption) {\n      var _this$props4 = _this.props,\n          onChange = _this$props4.onChange,\n          selectedOptions = _this$props4.selectedOptions;\n\n      if (onChange) {\n        onChange(selectedOptions.filter(function (option) {\n          return option !== removedOption;\n        }));\n      }\n\n      _this.clearActiveOption();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSelectedOptions\", function () {\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange([]);\n      } // Clicking the clear button will also cause it to disappear. This would result in focus\n      // shifting unexpectedly to the body element so we set it to the input which is more reasonable,\n\n\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n\n      if (!_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComboBoxClick\", function () {\n      // When the user clicks anywhere on the box, enter the interaction state.\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      } // If the user does this from a state in which an option has focus, then we need to reset it or clear it.\n\n\n      if (Boolean(_this.props.singleSelection) && _this.props.selectedOptions.length === 1) {\n        var selectedOptionIndex = _this.state.matchingOptions.findIndex(function (option) {\n          return option.label === _this.props.selectedOptions[0].label && option.key === _this.props.selectedOptions[0].key;\n        });\n\n        _this.setState({\n          activeOptionIndex: selectedOptionIndex\n        });\n      } else {\n        _this.clearActiveOption();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenListClick\", function () {\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n\n      if (!_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionListScroll\", function () {\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseListClick\", function () {\n      _this.closeList();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchChange\", function (searchValue) {\n      var _this$props5 = _this.props,\n          onSearchChange = _this$props5.onSearchChange,\n          delimiter = _this$props5.delimiter;\n\n      if (onSearchChange) {\n        var _hasMatchingOptions = _this.state.matchingOptions.length > 0;\n\n        onSearchChange(searchValue, _hasMatchingOptions);\n      }\n\n      _this.setState({\n        searchValue: searchValue\n      }, function () {\n        if (searchValue && _this.state.isListOpen === false) _this.openList();\n      });\n\n      if (delimiter && searchValue.endsWith(delimiter)) {\n        _this.setCustomOptions(false);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateMatchingOptionsIfDifferent\", function (newMatchingOptions) {\n      var _this$state = _this.state,\n          matchingOptions = _this$state.matchingOptions,\n          activeOptionIndex = _this$state.activeOptionIndex;\n      var _this$props6 = _this.props,\n          singleSelection = _this$props6.singleSelection,\n          selectedOptions = _this$props6.selectedOptions;\n      var areOptionsDifferent = false;\n\n      if (matchingOptions.length !== newMatchingOptions.length) {\n        areOptionsDifferent = true;\n      } else {\n        for (var i = 0; i < matchingOptions.length; i++) {\n          if (matchingOptions[i].label !== newMatchingOptions[i].label) {\n            areOptionsDifferent = true;\n            break;\n          }\n        }\n      }\n\n      if (areOptionsDifferent) {\n        _this.optionsRefInstances = [];\n        var nextActiveOptionIndex = activeOptionIndex; // ensure that the currently selected single option is active if it is in the matchingOptions\n\n        if (Boolean(singleSelection) && selectedOptions.length === 1) {\n          if (newMatchingOptions.includes(selectedOptions[0])) {\n            nextActiveOptionIndex = newMatchingOptions.indexOf(selectedOptions[0]);\n          }\n        }\n\n        _this.setState({\n          matchingOptions: newMatchingOptions,\n          activeOptionIndex: nextActiveOptionIndex\n        });\n\n        if (!newMatchingOptions.length) {\n          // Prevent endless setState -> componentWillUpdate -> setState loop.\n          if (_this.hasActiveOption()) {\n            _this.clearActiveOption();\n          }\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(EuiComboBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._isMounted = true; // TODO: This will need to be called once the actual stylesheet loads.\n\n      setTimeout(function () {\n        if (_this2.autoSizeInputRefInstance) {\n          _this2.autoSizeInputRefInstance.copyInputStyles();\n        }\n      }, 100);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$props7 = this.props,\n          options = _this$props7.options,\n          selectedOptions = _this$props7.selectedOptions,\n          singleSelection = _this$props7.singleSelection,\n          sortMatchesBy = _this$props7.sortMatchesBy;\n      var searchValue = this.state.searchValue; // React 16.3 has a bug (fixed in 16.4) where getDerivedStateFromProps\n      // isn't called after a state change, and we track `searchValue` in state\n      // instead we need to react to a change in searchValue here\n\n      this.updateMatchingOptionsIfDifferent(getMatchingOptions(options, selectedOptions, searchValue, this.props.async, Boolean(singleSelection), sortMatchesBy));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props8 = this.props,\n          dataTestSubj = _this$props8['data-test-subj'],\n          async = _this$props8.async,\n          className = _this$props8.className,\n          compressed = _this$props8.compressed,\n          customOptionText = _this$props8.customOptionText,\n          fullWidth = _this$props8.fullWidth,\n          id = _this$props8.id,\n          inputRef = _this$props8.inputRef,\n          isClearable = _this$props8.isClearable,\n          isDisabled = _this$props8.isDisabled,\n          isInvalid = _this$props8.isInvalid,\n          isLoading = _this$props8.isLoading,\n          noSuggestions = _this$props8.noSuggestions,\n          onBlur = _this$props8.onBlur,\n          onChange = _this$props8.onChange,\n          onCreateOption = _this$props8.onCreateOption,\n          onSearchChange = _this$props8.onSearchChange,\n          options = _this$props8.options,\n          placeholder = _this$props8.placeholder,\n          renderOption = _this$props8.renderOption,\n          rowHeight = _this$props8.rowHeight,\n          selectedOptions = _this$props8.selectedOptions,\n          singleSelection = _this$props8.singleSelection,\n          prepend = _this$props8.prepend,\n          sortMatchesBy = _this$props8.sortMatchesBy,\n          delimiter = _this$props8.delimiter,\n          append = _this$props8.append,\n          rest = _objectWithoutProperties(_this$props8, [\"data-test-subj\", \"async\", \"className\", \"compressed\", \"customOptionText\", \"fullWidth\", \"id\", \"inputRef\", \"isClearable\", \"isDisabled\", \"isInvalid\", \"isLoading\", \"noSuggestions\", \"onBlur\", \"onChange\", \"onCreateOption\", \"onSearchChange\", \"options\", \"placeholder\", \"renderOption\", \"rowHeight\", \"selectedOptions\", \"singleSelection\", \"prepend\", \"sortMatchesBy\", \"delimiter\", \"append\"]);\n\n      var _this$state2 = this.state,\n          activeOptionIndex = _this$state2.activeOptionIndex,\n          hasFocus = _this$state2.hasFocus,\n          isListOpen = _this$state2.isListOpen,\n          listPosition = _this$state2.listPosition,\n          searchValue = _this$state2.searchValue,\n          width = _this$state2.width,\n          matchingOptions = _this$state2.matchingOptions; // Visually indicate the combobox is in an invalid state if it has lost focus but there is text entered in the input.\n      // When custom options are disabled and the user leaves the combo box after entering text that does not match any\n      // options, this tells the user that they've entered invalid input.\n\n      var markAsInvalid = isInvalid || (hasFocus === false || isListOpen === false) && searchValue;\n      var classes = classNames('euiComboBox', className, {\n        'euiComboBox--compressed': compressed,\n        'euiComboBox--fullWidth': fullWidth,\n        'euiComboBox-isDisabled': isDisabled,\n        'euiComboBox-isInvalid': markAsInvalid,\n        'euiComboBox-isOpen': isListOpen\n      });\n      var value = selectedOptions.map(function (selectedOption) {\n        return selectedOption.label;\n      }).join(', ');\n      var optionsList;\n\n      if (!noSuggestions && isListOpen) {\n        var optionsListDataTestSubj = dataTestSubj ? \"\".concat(dataTestSubj, \"-optionsList\") : undefined;\n        optionsList = /*#__PURE__*/React.createElement(EuiPortal, null, /*#__PURE__*/React.createElement(EuiComboBoxOptionsList, {\n          zIndex: this.state.listZIndex,\n          activeOptionIndex: this.state.activeOptionIndex,\n          areAllOptionsSelected: this.areAllOptionsSelected(),\n          customOptionText: customOptionText,\n          \"data-test-subj\": optionsListDataTestSubj,\n          fullWidth: fullWidth,\n          isLoading: isLoading,\n          listRef: this.listRefCallback,\n          matchingOptions: matchingOptions,\n          onCloseList: this.closeList,\n          onCreateOption: onCreateOption,\n          onOptionClick: this.onOptionClick,\n          onOptionEnterKey: this.onOptionEnterKey,\n          onScroll: this.onOptionListScroll,\n          optionRef: this.optionRefCallback,\n          options: options,\n          position: listPosition,\n          singleSelection: singleSelection,\n          renderOption: renderOption,\n          rootId: this.rootId,\n          rowHeight: rowHeight,\n          scrollToIndex: activeOptionIndex,\n          searchValue: searchValue,\n          selectedOptions: selectedOptions,\n          updatePosition: this.updatePosition,\n          width: width,\n          delimiter: delimiter,\n          getSelectedOptionForSearchValue: getSelectedOptionForSearchValue\n        }));\n      }\n\n      return (\n        /*#__PURE__*/\n\n        /**\n         * Re: jsx-a11y/interactive-supports-focus\n         * Focus is managed and is placed on the textbox element (`EuiComboBoxInput`)\n         *\n         * Re: jsx-a11y/role-has-required-aria-props\n         * Expansion is managed and required `aria-controls` prop is placed on the textbox element (`EuiComboBoxInput`)\n         *\n         * Reference for both: https://www.w3.org/TR/2017/REC-wai-aria-1.1-20171214/#combobox,\n         * which verifies that this implementation follows the spec.\n         */\n        // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n        React.createElement(\"div\", _extends({}, rest, {\n          \"aria-expanded\": isListOpen,\n          \"aria-haspopup\": \"listbox\",\n          className: classes,\n          \"data-test-subj\": dataTestSubj,\n          onKeyDown: this.onKeyDown,\n          ref: this.comboBoxRefCallback,\n          role: \"combobox\"\n        }), /*#__PURE__*/React.createElement(EuiComboBoxInput, {\n          autoSizeInputRef: this.autoSizeInputRefCallback,\n          compressed: compressed,\n          focusedOptionId: this.hasActiveOption() ? this.rootId(\"_option-\".concat(this.state.activeOptionIndex)) : undefined,\n          fullWidth: fullWidth,\n          hasSelectedOptions: selectedOptions.length > 0,\n          id: id,\n          inputRef: this.searchInputRefCallback,\n          isDisabled: isDisabled,\n          isListOpen: isListOpen,\n          noIcon: !!noSuggestions,\n          onChange: this.onSearchChange,\n          onClear: isClearable && !isDisabled ? this.clearSelectedOptions : undefined,\n          onClick: this.onComboBoxClick,\n          onCloseListClick: this.onCloseListClick,\n          onFocus: this.onComboBoxFocus,\n          onOpenListClick: this.onOpenListClick,\n          onRemoveOption: this.onRemoveOption,\n          placeholder: placeholder,\n          rootId: this.rootId,\n          searchValue: searchValue,\n          selectedOptions: selectedOptions,\n          singleSelection: singleSelection,\n          toggleButtonRef: this.toggleButtonRefCallback,\n          updatePosition: this.updatePosition,\n          value: value,\n          append: singleSelection ? append : undefined,\n          prepend: singleSelection ? prepend : undefined,\n          isLoading: isLoading\n        }), optionsList)\n      );\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var options = nextProps.options,\n          selectedOptions = nextProps.selectedOptions,\n          singleSelection = nextProps.singleSelection,\n          sortMatchesBy = nextProps.sortMatchesBy;\n      var activeOptionIndex = prevState.activeOptionIndex,\n          searchValue = prevState.searchValue; // Calculate and cache the options which match the searchValue, because we use this information\n      // in multiple places and it would be expensive to calculate repeatedly.\n\n      var matchingOptions = getMatchingOptions(options, selectedOptions, searchValue, nextProps.async, Boolean(singleSelection), sortMatchesBy);\n      var stateUpdate = {\n        matchingOptions: matchingOptions\n      };\n\n      if (activeOptionIndex >= matchingOptions.length) {\n        stateUpdate.activeOptionIndex = -1;\n      }\n\n      return stateUpdate;\n    }\n  }]);\n\n  return EuiComboBox;\n}(Component);\n\n_defineProperty(EuiComboBox, \"defaultProps\", {\n  async: false,\n  compressed: false,\n  fullWidth: false,\n  isClearable: true,\n  options: [],\n  selectedOptions: [],\n  singleSelection: false,\n  prepend: undefined,\n  append: undefined,\n  sortMatchesBy: 'none'\n});\n\nEuiComboBox.propTypes = {\n  \"data-test-subj\": PropTypes.string,\n\n  /**\n     * Updates the list of options asynchronously\n     */\n  async: PropTypes.bool.isRequired,\n  className: PropTypes.string,\n\n  /**\n     * When `true` creates a shorter height input\n     */\n  compressed: PropTypes.bool.isRequired,\n\n  /**\n     * When `true` expands to the entire width available\n     */\n  fullWidth: PropTypes.bool.isRequired,\n  id: PropTypes.string,\n  inputRef: PropTypes.any,\n\n  /**\n     * Shows a button that quickly clears any input\n     */\n  isClearable: PropTypes.bool.isRequired,\n\n  /**\n     * Disables the input\n     */\n  isDisabled: PropTypes.bool,\n  isInvalid: PropTypes.bool,\n\n  /**\n     * Swaps the dropdown options for a loading spinner\n     */\n  isLoading: PropTypes.bool,\n\n  /**\n     * Doesn't show the suggestions list/dropdown\n     */\n  noSuggestions: PropTypes.bool,\n  onBlur: PropTypes.any,\n\n  /**\n     * Called every time the query in the combo box is parsed\n     */\n  onChange: PropTypes.func,\n  onFocus: PropTypes.any,\n  onKeyDown: PropTypes.any,\n\n  /**\n     * Called every time the text query in the search box is parsed\n     */\n  onSearchChange: PropTypes.func,\n\n  /**\n     * Sets the placeholder of the input\n     */\n  placeholder: PropTypes.string,\n\n  /**\n     * Every option must be the same height and must be explicitly set if using a custom render\n     */\n  rowHeight: PropTypes.number,\n\n  /**\n     * When `true` only allows the user to select a single option. Set to `{ asPlainText: true }` to not render input selection as pills\n     */\n  singleSelection: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.shape({\n    asPlainText: PropTypes.bool\n  }).isRequired]).isRequired,\n\n  /**\n     * Display matching options by:\n     * `startsWith`: moves items that start with search value to top of the list;\n     * `none`: don't change the sort order of initial object\n     */\n  sortMatchesBy: PropTypes.oneOf([\"none\", \"startsWith\"]).isRequired,\n\n  /**\n     * Creates an input group with element(s) coming before input. It won't show if `singleSelection` is set to `false`.\n     * `string` | `ReactElement` or an array of these\n     */\n  prepend: PropTypes.any,\n\n  /**\n     * Creates an input group with element(s) coming after input. It won't show if `singleSelection` is set to `false`.\n     * `string` | `ReactElement` or an array of these\n     */\n  append: PropTypes.any,\n\n  /**\n     * A special character to use as a value separator. Typically a comma `,`\n     */\n  delimiter: PropTypes.string,\n  \"aria-label\": PropTypes.string\n};","map":{"version":3,"sources":["/Users/inwoo/Projects/coldcallproject/coldcallproject/node_modules/@elastic/eui/es/components/combo_box/combo_box.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","React","Component","PropTypes","classNames","findPopoverPosition","htmlIdGenerator","EuiPortal","EuiComboBoxOptionsList","getMatchingOptions","flattenOptionGroups","getSelectedOptionForSearchValue","EuiComboBoxInput","getElementZIndex","initialSearchValue","EuiComboBox","_Component","_super","_this","_len","args","Array","_key","concat","activeOptionIndex","hasFocus","isListOpen","listElement","listPosition","listZIndex","undefined","matchingOptions","options","selectedOptions","async","Boolean","singleSelection","sortMatchesBy","searchValue","width","ref","comboBoxRefInstance","removeEventListener","onContainerBlur","addEventListener","comboBoxBounds","getBoundingClientRect","setState","autoSizeInputRefInstance","searchInputRefInstance","inputRef","document","body","listRefInstance","toggleButtonRefInstance","index","optionsRefInstances","event","clearActiveOption","state","_isMounted","listElementBounds","height","_ref","allowCrossAxis","anchor","popover","position","top","style","left","window","pageXOffset","amount","_ref2","nextActiveOptionIndex","direction","isGroupLabelOption","onSearchChange","onRemoveOption","openList","isContainerBlur","_this$props","onCreateOption","doesSearchMatchOnlyOption","onAddOption","isOptionCreated","clearSearchValue","closeList","label","toLowerCase","_this$props2","flattenOptions","map","option","trim","numberOfSelectedOptions","_ref3","trimmedLabel","findIndex","onFocus","delimiter","split","addCustomOption","focusEvent","relatedTarget","explicitOriginalTarget","focusedInOptionsList","contains","focusedInInput","onBlur","hasActiveOption","setCustomOptions","ARROW_UP","preventDefault","stopPropagation","incrementActiveOptionIndex","ARROW_DOWN","BACKSPACE","removeLastOption","ESCAPE","ENTER","TAB","onKeyDown","addedOption","disabled","_this$props3","onChange","singleSelectionProp","changeOptions","focus","requestAnimationFrame","removedOption","_this$props4","selectedOptionIndex","_this$props5","_hasMatchingOptions","endsWith","newMatchingOptions","_this$state","_this$props6","areOptionsDifferent","includes","componentDidMount","_this2","setTimeout","copyInputStyles","componentDidUpdate","_this$props7","updateMatchingOptionsIfDifferent","componentWillUnmount","render","_this$props8","dataTestSubj","className","compressed","customOptionText","fullWidth","id","isClearable","isDisabled","isInvalid","isLoading","noSuggestions","placeholder","renderOption","rowHeight","prepend","append","rest","_this$state2","markAsInvalid","classes","selectedOption","join","optionsList","optionsListDataTestSubj","createElement","zIndex","areAllOptionsSelected","listRef","listRefCallback","onCloseList","onOptionClick","onOptionEnterKey","onScroll","onOptionListScroll","optionRef","optionRefCallback","rootId","scrollToIndex","updatePosition","comboBoxRefCallback","role","autoSizeInputRef","autoSizeInputRefCallback","focusedOptionId","hasSelectedOptions","searchInputRefCallback","noIcon","onClear","clearSelectedOptions","onClick","onComboBoxClick","onCloseListClick","onComboBoxFocus","onOpenListClick","toggleButtonRef","toggleButtonRefCallback","getDerivedStateFromProps","nextProps","prevState","stateUpdate","propTypes","string","bool","isRequired","any","func","number","oneOfType","shape","asPlainText","oneOf"],"mappings":"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","sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n/**\n * Elements within EuiComboBox which would normally be tabbable (inputs, buttons) have been removed\n * from the tab order with tabindex={-1} so that we can control the keyboard navigation interface.\n */\n\n/* eslint-disable jsx-a11y/role-has-required-aria-props */\nimport React, { Component } from 'react';\nimport PropTypes from \"prop-types\";\nimport classNames from 'classnames';\nimport { findPopoverPosition, htmlIdGenerator, keys } from '../../services';\nimport { EuiPortal } from '../portal';\nimport { EuiComboBoxOptionsList } from './combo_box_options_list';\nimport { getMatchingOptions, flattenOptionGroups, getSelectedOptionForSearchValue } from './matching_options';\nimport { EuiComboBoxInput } from './combo_box_input/combo_box_input';\nimport { getElementZIndex } from '../../services/popover';\nvar initialSearchValue = '';\nexport var EuiComboBox = /*#__PURE__*/function (_Component) {\n  _inherits(EuiComboBox, _Component);\n\n  var _super = _createSuper(EuiComboBox);\n\n  function EuiComboBox() {\n    var _this;\n\n    _classCallCheck(this, EuiComboBox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeOptionIndex: -1,\n      hasFocus: false,\n      isListOpen: false,\n      listElement: null,\n      listPosition: 'bottom',\n      listZIndex: undefined,\n      matchingOptions: getMatchingOptions(_this.props.options, _this.props.selectedOptions, initialSearchValue, _this.props.async, Boolean(_this.props.singleSelection), _this.props.sortMatchesBy),\n      searchValue: initialSearchValue,\n      width: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"rootId\", htmlIdGenerator());\n\n    _defineProperty(_assertThisInitialized(_this), \"comboBoxRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"comboBoxRefCallback\", function (ref) {\n      // IE11 doesn't support the `relatedTarget` event property for blur events\n      // but does add it for focusout. React doesn't support `onFocusOut` so here we are.\n      if (_this.comboBoxRefInstance) {\n        _this.comboBoxRefInstance.removeEventListener('focusout', _this.onContainerBlur);\n      }\n\n      _this.comboBoxRefInstance = ref;\n\n      if (_this.comboBoxRefInstance) {\n        _this.comboBoxRefInstance.addEventListener('focusout', _this.onContainerBlur);\n\n        var comboBoxBounds = _this.comboBoxRefInstance.getBoundingClientRect();\n\n        _this.setState({\n          width: comboBoxBounds.width\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"autoSizeInputRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"autoSizeInputRefCallback\", function (ref) {\n      _this.autoSizeInputRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInputRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"searchInputRefCallback\", function (ref) {\n      _this.searchInputRefInstance = ref;\n      if (_this.props.inputRef) _this.props.inputRef(ref);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"listRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"listRefCallback\", function (ref) {\n      if (_this.comboBoxRefInstance) {\n        // find the zIndex of the combobox relative to the page body\n        // and use that to depth-position the list box\n        // adds an extra `100` to provide some defense around neighboring elements' positioning\n        var listZIndex = getElementZIndex(_this.comboBoxRefInstance, document.body) + 100;\n\n        _this.setState({\n          listZIndex: listZIndex\n        });\n      }\n\n      _this.listRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleButtonRefInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleButtonRefCallback\", function (ref) {\n      _this.toggleButtonRefInstance = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"optionsRefInstances\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"optionRefCallback\", function (index, ref) {\n      _this.optionsRefInstances[index] = ref;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"openList\", function () {\n      _this.setState({\n        isListOpen: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeList\", function (event) {\n      if (event && event.target === _this.searchInputRefInstance) {\n        // really long search values / custom entries triggers a scroll event on the input\n        // which the EuiComboBoxOptionsList passes through here\n        return;\n      }\n\n      _this.clearActiveOption();\n\n      _this.setState({\n        listZIndex: undefined,\n        isListOpen: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updatePosition\", function () {\n      var listElement = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.listElement;\n\n      if (!_this._isMounted) {\n        return;\n      }\n\n      if (!_this.state.isListOpen) {\n        return;\n      }\n\n      if (!listElement) {\n        return;\n      } // it's possible that updateListPosition is called when listElement is becoming visible, but isn't yet\n\n\n      var listElementBounds = listElement.getBoundingClientRect();\n\n      if (listElementBounds.width === 0 || listElementBounds.height === 0) {\n        return;\n      }\n\n      if (!_this.comboBoxRefInstance) {\n        return;\n      }\n\n      var comboBoxBounds = _this.comboBoxRefInstance.getBoundingClientRect();\n\n      var _ref = findPopoverPosition({\n        allowCrossAxis: false,\n        anchor: _this.comboBoxRefInstance,\n        popover: listElement,\n        position: 'bottom'\n      }),\n          position = _ref.position,\n          top = _ref.top;\n\n      if (_this.listRefInstance) {\n        _this.listRefInstance.style.top = \"\".concat(top, \"px\"); // listElement doesn't have its width set until after updating the position\n        // which means the popover service won't know about the correct width\n        // however, we already know where to position the element\n\n        _this.listRefInstance.style.left = \"\".concat(comboBoxBounds.left + window.pageXOffset, \"px\");\n        _this.listRefInstance.style.width = \"\".concat(comboBoxBounds.width, \"px\");\n      } // Cache for future calls.\n\n\n      _this.setState({\n        listElement: listElement,\n        listPosition: position,\n        width: comboBoxBounds.width\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"incrementActiveOptionIndex\", function (amount) {\n      // If there are no options available, do nothing.\n      if (!_this.state.matchingOptions.length) {\n        return;\n      }\n\n      _this.setState(function (_ref2) {\n        var activeOptionIndex = _ref2.activeOptionIndex,\n            matchingOptions = _ref2.matchingOptions;\n        var nextActiveOptionIndex;\n\n        if (activeOptionIndex < 0) {\n          // If this is the beginning of the user's keyboard navigation of the menu, then we'll focus\n          // either the first or last item.\n          nextActiveOptionIndex = amount < 0 ? matchingOptions.length - 1 : 0;\n        } else {\n          nextActiveOptionIndex = activeOptionIndex + amount;\n\n          if (nextActiveOptionIndex < 0) {\n            nextActiveOptionIndex = matchingOptions.length - 1;\n          } else if (nextActiveOptionIndex === matchingOptions.length) {\n            nextActiveOptionIndex = 0;\n          }\n        } // Group titles are included in option list but are not selectable\n        // Skip group title options\n\n\n        var direction = amount > 0 ? 1 : -1;\n\n        while (matchingOptions[nextActiveOptionIndex].isGroupLabelOption) {\n          nextActiveOptionIndex = nextActiveOptionIndex + direction;\n\n          if (nextActiveOptionIndex < 0) {\n            nextActiveOptionIndex = matchingOptions.length - 1;\n          } else if (nextActiveOptionIndex === matchingOptions.length) {\n            nextActiveOptionIndex = 0;\n          }\n        }\n\n        return {\n          activeOptionIndex: nextActiveOptionIndex\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hasActiveOption\", function () {\n      return _this.state.activeOptionIndex > -1 && _this.state.activeOptionIndex < _this.state.matchingOptions.length;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearActiveOption\", function () {\n      _this.setState({\n        activeOptionIndex: -1\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSearchValue\", function () {\n      _this.onSearchChange('');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeLastOption\", function () {\n      if (!_this.props.selectedOptions.length) {\n        return;\n      } // Backspace will be used to delete the input, not a pill.\n\n\n      if (_this.state.searchValue.length) {\n        return;\n      } // Delete last pill.\n\n\n      _this.onRemoveOption(_this.props.selectedOptions[_this.props.selectedOptions.length - 1]);\n\n      if (Boolean(_this.props.singleSelection) && !_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addCustomOption\", function (isContainerBlur, searchValue) {\n      var _this$props = _this.props,\n          onCreateOption = _this$props.onCreateOption,\n          options = _this$props.options,\n          selectedOptions = _this$props.selectedOptions,\n          singleSelection = _this$props.singleSelection;\n      var matchingOptions = _this.state.matchingOptions;\n\n      if (_this.doesSearchMatchOnlyOption()) {\n        _this.onAddOption(matchingOptions[0], isContainerBlur);\n\n        return;\n      }\n\n      if (!onCreateOption) {\n        return;\n      } // Don't bother trying to create an option if the user hasn't typed anything.\n\n\n      if (!searchValue) {\n        return;\n      } // Don't create the value if it's already been selected.\n\n\n      if (getSelectedOptionForSearchValue(searchValue, selectedOptions)) {\n        return;\n      } // Add new custom pill if this is custom input, even if it partially matches an option.\n\n\n      var isOptionCreated = onCreateOption(searchValue, flattenOptionGroups(options)); // Expect the consumer to be explicit in rejecting a custom option.\n\n      if (isOptionCreated === false) {\n        return;\n      }\n\n      _this.clearSearchValue();\n\n      if (Boolean(singleSelection)) {\n        // Adding a custom option to a single select that does not appear in the list of options\n        _this.closeList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"doesSearchMatchOnlyOption\", function () {\n      var searchValue = _this.state.searchValue;\n\n      if (_this.state.matchingOptions.length !== 1) {\n        return false;\n      }\n\n      return _this.state.matchingOptions[0].label.toLowerCase() === searchValue.toLowerCase();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"areAllOptionsSelected\", function () {\n      var _this$props2 = _this.props,\n          options = _this$props2.options,\n          selectedOptions = _this$props2.selectedOptions,\n          async = _this$props2.async; // Assume if this is async then there could be infinite options.\n\n      if (async) {\n        return false;\n      }\n\n      var flattenOptions = flattenOptionGroups(options).map(function (option) {\n        return _objectSpread(_objectSpread({}, option), {}, {\n          label: option.label.trim().toLowerCase()\n        });\n      });\n      var numberOfSelectedOptions = 0;\n      selectedOptions.forEach(function (_ref3) {\n        var label = _ref3.label;\n        var trimmedLabel = label.trim().toLowerCase();\n        if (flattenOptions.findIndex(function (option) {\n          return option.label === trimmedLabel;\n        }) !== -1) numberOfSelectedOptions += 1;\n      });\n      return flattenOptions.length === numberOfSelectedOptions;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComboBoxFocus\", function (event) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus(event);\n      }\n\n      _this.openList();\n\n      _this.setState({\n        hasFocus: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCustomOptions\", function (isContainerBlur) {\n      var searchValue = _this.state.searchValue;\n      var delimiter = _this.props.delimiter;\n\n      if (delimiter) {\n        searchValue.split(delimiter).forEach(function (option) {\n          if (option.length > 0) _this.addCustomOption(isContainerBlur, option);\n        });\n      } else {\n        _this.addCustomOption(isContainerBlur, searchValue);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onContainerBlur\", function (event) {\n      // close the options list, unless the use clicked on an option\n\n      /**\n       * FireFox returns `relatedTarget` as `null` for security reasons, but provides a proprietary `explicitOriginalTarget`.\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/explicitOriginalTarget\n       */\n      var focusEvent = event;\n      var relatedTarget = focusEvent.relatedTarget || focusEvent.explicitOriginalTarget;\n\n      var focusedInOptionsList = relatedTarget && _this.listRefInstance && _this.listRefInstance.contains(relatedTarget);\n\n      var focusedInInput = relatedTarget && _this.comboBoxRefInstance && _this.comboBoxRefInstance.contains(relatedTarget);\n\n      if (!focusedInOptionsList && !focusedInInput) {\n        _this.closeList();\n\n        if (_this.props.onBlur) {\n          _this.props.onBlur(event);\n        }\n\n        _this.setState({\n          hasFocus: false\n        }); // If the user tabs away or changes focus to another element, take whatever input they've\n        // typed and convert it into a pill, to prevent the combo box from looking like a text input.\n\n\n        if (!_this.hasActiveOption()) {\n          _this.setCustomOptions(true);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (event) {\n      switch (event.key) {\n        case keys.ARROW_UP:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.state.isListOpen) {\n            _this.incrementActiveOptionIndex(-1);\n          } else {\n            _this.openList();\n          }\n\n          break;\n\n        case keys.ARROW_DOWN:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.state.isListOpen) {\n            _this.incrementActiveOptionIndex(1);\n          } else {\n            _this.openList();\n          }\n\n          break;\n\n        case keys.BACKSPACE:\n          event.stopPropagation();\n\n          _this.removeLastOption();\n\n          break;\n\n        case keys.ESCAPE:\n          if (_this.state.isListOpen) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            _this.closeList();\n          }\n\n          break;\n\n        case keys.ENTER:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (_this.hasActiveOption()) {\n            _this.onAddOption(_this.state.matchingOptions[_this.state.activeOptionIndex]);\n          } else {\n            _this.setCustomOptions(false);\n          }\n\n          break;\n\n        case keys.TAB:\n          // Disallow tabbing when the user is navigating the options.\n          if (_this.hasActiveOption() && _this.state.isListOpen) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n\n          break;\n\n        default:\n          if (_this.props.onKeyDown) {\n            _this.props.onKeyDown(event);\n          }\n\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionEnterKey\", function (option) {\n      _this.onAddOption(option);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionClick\", function (option) {\n      _this.onAddOption(option);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onAddOption\", function (addedOption, isContainerBlur) {\n      if (addedOption.disabled) {\n        return;\n      }\n\n      var _this$props3 = _this.props,\n          onChange = _this$props3.onChange,\n          selectedOptions = _this$props3.selectedOptions,\n          singleSelectionProp = _this$props3.singleSelection;\n      var singleSelection = Boolean(singleSelectionProp);\n      var changeOptions = singleSelection ? [addedOption] : selectedOptions.concat(addedOption);\n\n      if (onChange) {\n        onChange(changeOptions);\n      }\n\n      _this.clearSearchValue();\n\n      _this.clearActiveOption();\n\n      if (!isContainerBlur) {\n        if (_this.searchInputRefInstance) {\n          _this.searchInputRefInstance.focus();\n        }\n      }\n\n      if (singleSelection) {\n        requestAnimationFrame(function () {\n          return _this.closeList();\n        });\n      } else {\n        _this.setState({\n          activeOptionIndex: _this.state.matchingOptions.indexOf(addedOption)\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRemoveOption\", function (removedOption) {\n      var _this$props4 = _this.props,\n          onChange = _this$props4.onChange,\n          selectedOptions = _this$props4.selectedOptions;\n\n      if (onChange) {\n        onChange(selectedOptions.filter(function (option) {\n          return option !== removedOption;\n        }));\n      }\n\n      _this.clearActiveOption();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSelectedOptions\", function () {\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange([]);\n      } // Clicking the clear button will also cause it to disappear. This would result in focus\n      // shifting unexpectedly to the body element so we set it to the input which is more reasonable,\n\n\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n\n      if (!_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onComboBoxClick\", function () {\n      // When the user clicks anywhere on the box, enter the interaction state.\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      } // If the user does this from a state in which an option has focus, then we need to reset it or clear it.\n\n\n      if (Boolean(_this.props.singleSelection) && _this.props.selectedOptions.length === 1) {\n        var selectedOptionIndex = _this.state.matchingOptions.findIndex(function (option) {\n          return option.label === _this.props.selectedOptions[0].label && option.key === _this.props.selectedOptions[0].key;\n        });\n\n        _this.setState({\n          activeOptionIndex: selectedOptionIndex\n        });\n      } else {\n        _this.clearActiveOption();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOpenListClick\", function () {\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n\n      if (!_this.state.isListOpen) {\n        _this.openList();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onOptionListScroll\", function () {\n      if (_this.searchInputRefInstance) {\n        _this.searchInputRefInstance.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCloseListClick\", function () {\n      _this.closeList();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearchChange\", function (searchValue) {\n      var _this$props5 = _this.props,\n          onSearchChange = _this$props5.onSearchChange,\n          delimiter = _this$props5.delimiter;\n\n      if (onSearchChange) {\n        var _hasMatchingOptions = _this.state.matchingOptions.length > 0;\n\n        onSearchChange(searchValue, _hasMatchingOptions);\n      }\n\n      _this.setState({\n        searchValue: searchValue\n      }, function () {\n        if (searchValue && _this.state.isListOpen === false) _this.openList();\n      });\n\n      if (delimiter && searchValue.endsWith(delimiter)) {\n        _this.setCustomOptions(false);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateMatchingOptionsIfDifferent\", function (newMatchingOptions) {\n      var _this$state = _this.state,\n          matchingOptions = _this$state.matchingOptions,\n          activeOptionIndex = _this$state.activeOptionIndex;\n      var _this$props6 = _this.props,\n          singleSelection = _this$props6.singleSelection,\n          selectedOptions = _this$props6.selectedOptions;\n      var areOptionsDifferent = false;\n\n      if (matchingOptions.length !== newMatchingOptions.length) {\n        areOptionsDifferent = true;\n      } else {\n        for (var i = 0; i < matchingOptions.length; i++) {\n          if (matchingOptions[i].label !== newMatchingOptions[i].label) {\n            areOptionsDifferent = true;\n            break;\n          }\n        }\n      }\n\n      if (areOptionsDifferent) {\n        _this.optionsRefInstances = [];\n        var nextActiveOptionIndex = activeOptionIndex; // ensure that the currently selected single option is active if it is in the matchingOptions\n\n        if (Boolean(singleSelection) && selectedOptions.length === 1) {\n          if (newMatchingOptions.includes(selectedOptions[0])) {\n            nextActiveOptionIndex = newMatchingOptions.indexOf(selectedOptions[0]);\n          }\n        }\n\n        _this.setState({\n          matchingOptions: newMatchingOptions,\n          activeOptionIndex: nextActiveOptionIndex\n        });\n\n        if (!newMatchingOptions.length) {\n          // Prevent endless setState -> componentWillUpdate -> setState loop.\n          if (_this.hasActiveOption()) {\n            _this.clearActiveOption();\n          }\n        }\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(EuiComboBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._isMounted = true; // TODO: This will need to be called once the actual stylesheet loads.\n\n      setTimeout(function () {\n        if (_this2.autoSizeInputRefInstance) {\n          _this2.autoSizeInputRefInstance.copyInputStyles();\n        }\n      }, 100);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$props7 = this.props,\n          options = _this$props7.options,\n          selectedOptions = _this$props7.selectedOptions,\n          singleSelection = _this$props7.singleSelection,\n          sortMatchesBy = _this$props7.sortMatchesBy;\n      var searchValue = this.state.searchValue; // React 16.3 has a bug (fixed in 16.4) where getDerivedStateFromProps\n      // isn't called after a state change, and we track `searchValue` in state\n      // instead we need to react to a change in searchValue here\n\n      this.updateMatchingOptionsIfDifferent(getMatchingOptions(options, selectedOptions, searchValue, this.props.async, Boolean(singleSelection), sortMatchesBy));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props8 = this.props,\n          dataTestSubj = _this$props8['data-test-subj'],\n          async = _this$props8.async,\n          className = _this$props8.className,\n          compressed = _this$props8.compressed,\n          customOptionText = _this$props8.customOptionText,\n          fullWidth = _this$props8.fullWidth,\n          id = _this$props8.id,\n          inputRef = _this$props8.inputRef,\n          isClearable = _this$props8.isClearable,\n          isDisabled = _this$props8.isDisabled,\n          isInvalid = _this$props8.isInvalid,\n          isLoading = _this$props8.isLoading,\n          noSuggestions = _this$props8.noSuggestions,\n          onBlur = _this$props8.onBlur,\n          onChange = _this$props8.onChange,\n          onCreateOption = _this$props8.onCreateOption,\n          onSearchChange = _this$props8.onSearchChange,\n          options = _this$props8.options,\n          placeholder = _this$props8.placeholder,\n          renderOption = _this$props8.renderOption,\n          rowHeight = _this$props8.rowHeight,\n          selectedOptions = _this$props8.selectedOptions,\n          singleSelection = _this$props8.singleSelection,\n          prepend = _this$props8.prepend,\n          sortMatchesBy = _this$props8.sortMatchesBy,\n          delimiter = _this$props8.delimiter,\n          append = _this$props8.append,\n          rest = _objectWithoutProperties(_this$props8, [\"data-test-subj\", \"async\", \"className\", \"compressed\", \"customOptionText\", \"fullWidth\", \"id\", \"inputRef\", \"isClearable\", \"isDisabled\", \"isInvalid\", \"isLoading\", \"noSuggestions\", \"onBlur\", \"onChange\", \"onCreateOption\", \"onSearchChange\", \"options\", \"placeholder\", \"renderOption\", \"rowHeight\", \"selectedOptions\", \"singleSelection\", \"prepend\", \"sortMatchesBy\", \"delimiter\", \"append\"]);\n\n      var _this$state2 = this.state,\n          activeOptionIndex = _this$state2.activeOptionIndex,\n          hasFocus = _this$state2.hasFocus,\n          isListOpen = _this$state2.isListOpen,\n          listPosition = _this$state2.listPosition,\n          searchValue = _this$state2.searchValue,\n          width = _this$state2.width,\n          matchingOptions = _this$state2.matchingOptions; // Visually indicate the combobox is in an invalid state if it has lost focus but there is text entered in the input.\n      // When custom options are disabled and the user leaves the combo box after entering text that does not match any\n      // options, this tells the user that they've entered invalid input.\n\n      var markAsInvalid = isInvalid || (hasFocus === false || isListOpen === false) && searchValue;\n      var classes = classNames('euiComboBox', className, {\n        'euiComboBox--compressed': compressed,\n        'euiComboBox--fullWidth': fullWidth,\n        'euiComboBox-isDisabled': isDisabled,\n        'euiComboBox-isInvalid': markAsInvalid,\n        'euiComboBox-isOpen': isListOpen\n      });\n      var value = selectedOptions.map(function (selectedOption) {\n        return selectedOption.label;\n      }).join(', ');\n      var optionsList;\n\n      if (!noSuggestions && isListOpen) {\n        var optionsListDataTestSubj = dataTestSubj ? \"\".concat(dataTestSubj, \"-optionsList\") : undefined;\n        optionsList = /*#__PURE__*/React.createElement(EuiPortal, null, /*#__PURE__*/React.createElement(EuiComboBoxOptionsList, {\n          zIndex: this.state.listZIndex,\n          activeOptionIndex: this.state.activeOptionIndex,\n          areAllOptionsSelected: this.areAllOptionsSelected(),\n          customOptionText: customOptionText,\n          \"data-test-subj\": optionsListDataTestSubj,\n          fullWidth: fullWidth,\n          isLoading: isLoading,\n          listRef: this.listRefCallback,\n          matchingOptions: matchingOptions,\n          onCloseList: this.closeList,\n          onCreateOption: onCreateOption,\n          onOptionClick: this.onOptionClick,\n          onOptionEnterKey: this.onOptionEnterKey,\n          onScroll: this.onOptionListScroll,\n          optionRef: this.optionRefCallback,\n          options: options,\n          position: listPosition,\n          singleSelection: singleSelection,\n          renderOption: renderOption,\n          rootId: this.rootId,\n          rowHeight: rowHeight,\n          scrollToIndex: activeOptionIndex,\n          searchValue: searchValue,\n          selectedOptions: selectedOptions,\n          updatePosition: this.updatePosition,\n          width: width,\n          delimiter: delimiter,\n          getSelectedOptionForSearchValue: getSelectedOptionForSearchValue\n        }));\n      }\n\n      return (\n        /*#__PURE__*/\n\n        /**\n         * Re: jsx-a11y/interactive-supports-focus\n         * Focus is managed and is placed on the textbox element (`EuiComboBoxInput`)\n         *\n         * Re: jsx-a11y/role-has-required-aria-props\n         * Expansion is managed and required `aria-controls` prop is placed on the textbox element (`EuiComboBoxInput`)\n         *\n         * Reference for both: https://www.w3.org/TR/2017/REC-wai-aria-1.1-20171214/#combobox,\n         * which verifies that this implementation follows the spec.\n         */\n        // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n        React.createElement(\"div\", _extends({}, rest, {\n          \"aria-expanded\": isListOpen,\n          \"aria-haspopup\": \"listbox\",\n          className: classes,\n          \"data-test-subj\": dataTestSubj,\n          onKeyDown: this.onKeyDown,\n          ref: this.comboBoxRefCallback,\n          role: \"combobox\"\n        }), /*#__PURE__*/React.createElement(EuiComboBoxInput, {\n          autoSizeInputRef: this.autoSizeInputRefCallback,\n          compressed: compressed,\n          focusedOptionId: this.hasActiveOption() ? this.rootId(\"_option-\".concat(this.state.activeOptionIndex)) : undefined,\n          fullWidth: fullWidth,\n          hasSelectedOptions: selectedOptions.length > 0,\n          id: id,\n          inputRef: this.searchInputRefCallback,\n          isDisabled: isDisabled,\n          isListOpen: isListOpen,\n          noIcon: !!noSuggestions,\n          onChange: this.onSearchChange,\n          onClear: isClearable && !isDisabled ? this.clearSelectedOptions : undefined,\n          onClick: this.onComboBoxClick,\n          onCloseListClick: this.onCloseListClick,\n          onFocus: this.onComboBoxFocus,\n          onOpenListClick: this.onOpenListClick,\n          onRemoveOption: this.onRemoveOption,\n          placeholder: placeholder,\n          rootId: this.rootId,\n          searchValue: searchValue,\n          selectedOptions: selectedOptions,\n          singleSelection: singleSelection,\n          toggleButtonRef: this.toggleButtonRefCallback,\n          updatePosition: this.updatePosition,\n          value: value,\n          append: singleSelection ? append : undefined,\n          prepend: singleSelection ? prepend : undefined,\n          isLoading: isLoading\n        }), optionsList)\n      );\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var options = nextProps.options,\n          selectedOptions = nextProps.selectedOptions,\n          singleSelection = nextProps.singleSelection,\n          sortMatchesBy = nextProps.sortMatchesBy;\n      var activeOptionIndex = prevState.activeOptionIndex,\n          searchValue = prevState.searchValue; // Calculate and cache the options which match the searchValue, because we use this information\n      // in multiple places and it would be expensive to calculate repeatedly.\n\n      var matchingOptions = getMatchingOptions(options, selectedOptions, searchValue, nextProps.async, Boolean(singleSelection), sortMatchesBy);\n      var stateUpdate = {\n        matchingOptions: matchingOptions\n      };\n\n      if (activeOptionIndex >= matchingOptions.length) {\n        stateUpdate.activeOptionIndex = -1;\n      }\n\n      return stateUpdate;\n    }\n  }]);\n\n  return EuiComboBox;\n}(Component);\n\n_defineProperty(EuiComboBox, \"defaultProps\", {\n  async: false,\n  compressed: false,\n  fullWidth: false,\n  isClearable: true,\n  options: [],\n  selectedOptions: [],\n  singleSelection: false,\n  prepend: undefined,\n  append: undefined,\n  sortMatchesBy: 'none'\n});\n\nEuiComboBox.propTypes = {\n  \"data-test-subj\": PropTypes.string,\n\n  /**\n     * Updates the list of options asynchronously\n     */\n  async: PropTypes.bool.isRequired,\n  className: PropTypes.string,\n\n  /**\n     * When `true` creates a shorter height input\n     */\n  compressed: PropTypes.bool.isRequired,\n\n  /**\n     * When `true` expands to the entire width available\n     */\n  fullWidth: PropTypes.bool.isRequired,\n  id: PropTypes.string,\n  inputRef: PropTypes.any,\n\n  /**\n     * Shows a button that quickly clears any input\n     */\n  isClearable: PropTypes.bool.isRequired,\n\n  /**\n     * Disables the input\n     */\n  isDisabled: PropTypes.bool,\n  isInvalid: PropTypes.bool,\n\n  /**\n     * Swaps the dropdown options for a loading spinner\n     */\n  isLoading: PropTypes.bool,\n\n  /**\n     * Doesn't show the suggestions list/dropdown\n     */\n  noSuggestions: PropTypes.bool,\n  onBlur: PropTypes.any,\n\n  /**\n     * Called every time the query in the combo box is parsed\n     */\n  onChange: PropTypes.func,\n  onFocus: PropTypes.any,\n  onKeyDown: PropTypes.any,\n\n  /**\n     * Called every time the text query in the search box is parsed\n     */\n  onSearchChange: PropTypes.func,\n\n  /**\n     * Sets the placeholder of the input\n     */\n  placeholder: PropTypes.string,\n\n  /**\n     * Every option must be the same height and must be explicitly set if using a custom render\n     */\n  rowHeight: PropTypes.number,\n\n  /**\n     * When `true` only allows the user to select a single option. Set to `{ asPlainText: true }` to not render input selection as pills\n     */\n  singleSelection: PropTypes.oneOfType([PropTypes.bool.isRequired, PropTypes.shape({\n    asPlainText: PropTypes.bool\n  }).isRequired]).isRequired,\n\n  /**\n     * Display matching options by:\n     * `startsWith`: moves items that start with search value to top of the list;\n     * `none`: don't change the sort order of initial object\n     */\n  sortMatchesBy: PropTypes.oneOf([\"none\", \"startsWith\"]).isRequired,\n\n  /**\n     * Creates an input group with element(s) coming before input. It won't show if `singleSelection` is set to `false`.\n     * `string` | `ReactElement` or an array of these\n     */\n  prepend: PropTypes.any,\n\n  /**\n     * Creates an input group with element(s) coming after input. It won't show if `singleSelection` is set to `false`.\n     * `string` | `ReactElement` or an array of these\n     */\n  append: PropTypes.any,\n\n  /**\n     * A special character to use as a value separator. Typically a comma `,`\n     */\n  delimiter: PropTypes.string,\n  \"aria-label\": PropTypes.string\n};"]},"metadata":{},"sourceType":"module"}