{"ast":null,"code":"function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// The text-formatting logic & code in this file come from\n// https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n// under the following MIT license\n\n/*\nCopyright (c) 2017-2018 GitHub, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n */\n\n\nimport { isPluginWithImmediateFormatting } from './markdown_types';\n/**\n * Class for applying styles to a text editor. Accepts the HTML ID for the textarea\n * desired, and exposes the `.do(ACTION)` method for manipulating the text.\n *\n * @class MarkdownActions\n * @param {string} editorID\n */\n\nvar MarkdownActions = /*#__PURE__*/function () {\n  function MarkdownActions(editorID, uiPlugins) {\n    _classCallCheck(this, MarkdownActions);\n\n    this.editorID = editorID;\n\n    _defineProperty(this, \"styles\", void 0);\n    /**\n     * This object is in the format:\n     * [nameOfAction]: {[styles to apply]}\n     */\n\n\n    this.styles = _objectSpread(_objectSpread({}, uiPlugins.reduce(function (mappedPlugins, plugin) {\n      mappedPlugins[plugin.name] = plugin;\n      return mappedPlugins;\n    }, {})), {}, {\n      mdBold: {\n        name: 'mdBold',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '**',\n          suffix: '**',\n          trimFirst: true\n        }\n      },\n      mdItalic: {\n        name: 'mdItalic',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '_',\n          suffix: '_',\n          trimFirst: true\n        }\n      },\n      mdQuote: {\n        name: 'mdQuote',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '> ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      },\n      mdCode: {\n        name: 'mdCode',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '`',\n          suffix: '`',\n          blockPrefix: '```',\n          blockSuffix: '```'\n        }\n      },\n      mdLink: {\n        name: 'mdLink',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '[',\n          suffix: '](url)',\n          replaceNext: 'url',\n          scanFor: 'https?://'\n        }\n      },\n      mdUl: {\n        name: 'mdUl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '- ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      },\n      mdOl: {\n        name: 'mdOl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '1. ',\n          multiline: true,\n          orderedList: true\n        }\n      },\n      mdTl: {\n        name: 'mdTl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '- [ ] ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      }\n    });\n  }\n  /**\n   * .do() accepts a string and retrieves the correlating style object (defined in the\n   * constructor). It passes this to applyStyle() that does the text manipulation.\n   *\n   * @param {string} pluginName\n   * @memberof MarkdownActions\n   */\n\n\n  _createClass(MarkdownActions, [{\n    key: \"do\",\n    value: function _do(pluginName) {\n      var plugin = this.styles[pluginName];\n\n      if (isPluginWithImmediateFormatting(plugin)) {\n        this.applyStyle(plugin.formatting);\n        return true;\n      } else {\n        return plugin;\n      }\n    }\n    /**\n     * Sets the default styling object and then superimposes the changes to make on top of\n     * it. Calls the `styleSelectedText` helper function that does the heavy lifting.\n     * Adapted from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n     *\n     * @param {object} incomingStyle\n     * @memberof MarkdownActions\n     */\n\n  }, {\n    key: \"applyStyle\",\n    value: function applyStyle(incomingStyle) {\n      var defaults = {\n        prefix: '',\n        suffix: '',\n        blockPrefix: '',\n        blockSuffix: '',\n        multiline: false,\n        replaceNext: '',\n        prefixSpace: false,\n        scanFor: '',\n        surroundWithNewlines: false,\n        orderedList: false,\n        trimFirst: false\n      };\n\n      var outgoingStyle = _objectSpread(_objectSpread({}, defaults), incomingStyle);\n\n      var editor = document.getElementById(this.editorID);\n\n      if (editor) {\n        editor.focus();\n        styleSelectedText(editor, outgoingStyle);\n      }\n    }\n  }]);\n\n  return MarkdownActions;\n}();\n/**\n * The following helper functions and types were copied from the GitHub Markdown Toolbar\n * Element project. The project is MIT-licensed. See it here:\n * https://github.com/github/markdown-toolbar-element\n */\n\n\nfunction isMultipleLines(string) {\n  return string.trim().split('\\n').length > 1;\n}\n\nfunction repeat(string, n) {\n  return Array(n + 1).join(string);\n}\n\nfunction wordSelectionStart(text, i) {\n  var index = i;\n\n  while (text[index] && text[index - 1] != null && !text[index - 1].match(/\\s/)) {\n    index--;\n  }\n\n  return index;\n}\n\nfunction wordSelectionEnd(text, i, multiline) {\n  var index = i;\n  var breakpoint = multiline ? /\\n/ : /\\s/;\n\n  while (text[index] && !text[index].match(breakpoint)) {\n    index++;\n  }\n\n  return index;\n}\n\nvar MAX_TRIES = 10;\nvar TRY_TIMEOUT = 10;\n/*ms*/\n// modified from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n\nexport function insertText(textarea, _ref) {\n  var text = _ref.text,\n      selectionStart = _ref.selectionStart,\n      selectionEnd = _ref.selectionEnd;\n  var originalSelectionStart = textarea.selectionStart;\n  var before = textarea.value.slice(0, originalSelectionStart);\n  var after = textarea.value.slice(textarea.selectionEnd); // configuration modal/dialog will continue intercepting focus in Safari\n  // need to wait until the textarea can receive focus\n\n  var tries = 0;\n\n  var insertText = function insertText() {\n    var insertResult = document.execCommand('insertText', false, text);\n\n    if (insertResult === false) {\n      /**\n       * Fallback for Firefox; this kills undo/redo but at least updates the value\n       *\n       * Note that we're using the native HTMLTextAreaElement.set() method to play nicely with\n       * React's synthetic event system.\n       * https://hustle.bizongo.in/simulate-react-on-change-on-controlled-components-baa336920e04\n       */\n      var inputEvent = new Event('input', {\n        bubbles: true\n      });\n      var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype, 'value').set;\n      nativeInputValueSetter.call(textarea, before + text + after);\n      textarea.dispatchEvent(inputEvent);\n    }\n\n    if (selectionStart != null && selectionEnd != null) {\n      textarea.setSelectionRange(selectionStart, selectionEnd);\n    } else {\n      textarea.setSelectionRange(originalSelectionStart, textarea.selectionEnd);\n    }\n  };\n\n  var focusTextarea = function focusTextarea() {\n    textarea.focus();\n\n    if (document.activeElement === textarea) {\n      insertText();\n    } else if (++tries === MAX_TRIES) {\n      insertText();\n    } else {\n      setTimeout(focusTextarea, TRY_TIMEOUT);\n    }\n  };\n\n  focusTextarea();\n} // from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n\nfunction styleSelectedText(textarea, styleArgs) {\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var result;\n\n  if (styleArgs.orderedList) {\n    result = orderedList(textarea);\n  } else if (styleArgs.multiline && isMultipleLines(text)) {\n    result = multilineStyle(textarea, styleArgs);\n  } else {\n    result = blockStyle(textarea, styleArgs);\n  }\n\n  insertText(textarea, result);\n}\n\nfunction expandSelectedText(textarea, prefixToUse, suffixToUse) {\n  var multiline = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  if (textarea.selectionStart === textarea.selectionEnd) {\n    textarea.selectionStart = wordSelectionStart(textarea.value, textarea.selectionStart);\n    textarea.selectionEnd = wordSelectionEnd(textarea.value, textarea.selectionEnd, multiline);\n  } else {\n    var expandedSelectionStart = textarea.selectionStart - prefixToUse.length;\n    var expandedSelectionEnd = textarea.selectionEnd + suffixToUse.length;\n    var beginsWithPrefix = textarea.value.slice(expandedSelectionStart, textarea.selectionStart) === prefixToUse;\n    var endsWithSuffix = textarea.value.slice(textarea.selectionEnd, expandedSelectionEnd) === suffixToUse;\n\n    if (beginsWithPrefix && endsWithSuffix) {\n      textarea.selectionStart = expandedSelectionStart;\n      textarea.selectionEnd = expandedSelectionEnd;\n    }\n  }\n\n  return textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n}\n\nfunction newlinesToSurroundSelectedText(textarea) {\n  var beforeSelection = textarea.value.slice(0, textarea.selectionStart);\n  var afterSelection = textarea.value.slice(textarea.selectionEnd);\n  var breaksBefore = beforeSelection.match(/\\n*$/);\n  var breaksAfter = afterSelection.match(/^\\n*/);\n  var newlinesBeforeSelection = breaksBefore ? breaksBefore[0].length : 0;\n  var newlinesAfterSelection = breaksAfter ? breaksAfter[0].length : 0;\n  var newlinesToAppend;\n  var newlinesToPrepend;\n\n  if (beforeSelection.match(/\\S/) && newlinesBeforeSelection < 2) {\n    newlinesToAppend = repeat('\\n', 2 - newlinesBeforeSelection);\n  }\n\n  if (afterSelection.match(/\\S/) && newlinesAfterSelection < 2) {\n    newlinesToPrepend = repeat('\\n', 2 - newlinesAfterSelection);\n  }\n\n  if (newlinesToAppend == null) {\n    newlinesToAppend = '';\n  }\n\n  if (newlinesToPrepend == null) {\n    newlinesToPrepend = '';\n  }\n\n  return {\n    newlinesToAppend: newlinesToAppend,\n    newlinesToPrepend: newlinesToPrepend\n  };\n}\n\nfunction blockStyle(textarea, arg) {\n  var newlinesToAppend;\n  var newlinesToPrepend;\n  var prefix = arg.prefix,\n      suffix = arg.suffix,\n      blockPrefix = arg.blockPrefix,\n      blockSuffix = arg.blockSuffix,\n      replaceNext = arg.replaceNext,\n      prefixSpace = arg.prefixSpace,\n      scanFor = arg.scanFor,\n      surroundWithNewlines = arg.surroundWithNewlines;\n  var originalSelectionStart = textarea.selectionStart;\n  var originalSelectionEnd = textarea.selectionEnd;\n  var selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var prefixToUse = isMultipleLines(selectedText) && blockPrefix.length > 0 ? \"\".concat(blockPrefix, \"\\n\") : prefix;\n  var suffixToUse = isMultipleLines(selectedText) && blockSuffix.length > 0 ? \"\\n\".concat(blockSuffix) : suffix;\n\n  if (prefixSpace) {\n    var beforeSelection = textarea.value[textarea.selectionStart - 1];\n\n    if (textarea.selectionStart !== 0 && beforeSelection != null && !beforeSelection.match(/\\s/)) {\n      prefixToUse = \" \".concat(prefixToUse);\n    }\n  }\n\n  selectedText = expandSelectedText(textarea, prefixToUse, suffixToUse, arg.multiline);\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd;\n  var hasReplaceNext = replaceNext.length > 0 && suffixToUse.indexOf(replaceNext) > -1 && selectedText.length > 0;\n\n  if (surroundWithNewlines) {\n    var ref = newlinesToSurroundSelectedText(textarea);\n    newlinesToAppend = ref.newlinesToAppend;\n    newlinesToPrepend = ref.newlinesToPrepend;\n    prefixToUse = newlinesToAppend + prefix;\n    suffixToUse += newlinesToPrepend;\n  }\n\n  if (selectedText.startsWith(prefixToUse) && selectedText.endsWith(suffixToUse)) {\n    var replacementText = selectedText.slice(prefixToUse.length, selectedText.length - suffixToUse.length);\n\n    if (originalSelectionStart === originalSelectionEnd) {\n      var position = originalSelectionStart - prefixToUse.length;\n      position = Math.max(position, selectionStart);\n      position = Math.min(position, selectionStart + replacementText.length);\n      selectionStart = selectionEnd = position;\n    } else {\n      selectionEnd = selectionStart + replacementText.length;\n    }\n\n    return {\n      text: replacementText,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else if (!hasReplaceNext) {\n    var _replacementText = prefixToUse + selectedText + suffixToUse;\n\n    selectionStart = originalSelectionStart + prefixToUse.length;\n    selectionEnd = originalSelectionEnd + prefixToUse.length;\n    var whitespaceEdges = selectedText.match(/^\\s*|\\s*$/g);\n\n    if (arg.trimFirst && whitespaceEdges) {\n      var leadingWhitespace = whitespaceEdges[0] || '';\n      var trailingWhitespace = whitespaceEdges[1] || '';\n      _replacementText = leadingWhitespace + prefixToUse + selectedText.trim() + suffixToUse + trailingWhitespace;\n      selectionStart += leadingWhitespace.length;\n      selectionEnd -= trailingWhitespace.length;\n    }\n\n    return {\n      text: _replacementText,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else if (scanFor.length > 0 && selectedText.match(scanFor)) {\n    suffixToUse = suffixToUse.replace(replaceNext, selectedText);\n\n    var _replacementText2 = prefixToUse + suffixToUse;\n\n    selectionStart = selectionEnd = selectionStart + prefixToUse.length;\n    return {\n      text: _replacementText2,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else {\n    var _replacementText3 = prefixToUse + selectedText + suffixToUse;\n\n    selectionStart = selectionStart + prefixToUse.length + selectedText.length + suffixToUse.indexOf(replaceNext);\n    selectionEnd = selectionStart + replaceNext.length;\n    return {\n      text: _replacementText3,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  }\n}\n\nfunction multilineStyle(textarea, arg) {\n  var prefix = arg.prefix,\n      suffix = arg.suffix,\n      surroundWithNewlines = arg.surroundWithNewlines;\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd;\n  var lines = text.split('\\n');\n  var undoStyle = lines.every(function (line) {\n    return line.startsWith(prefix) && line.endsWith(suffix);\n  });\n\n  if (undoStyle) {\n    text = lines.map(function (line) {\n      return line.slice(prefix.length, line.length - suffix.length);\n    }).join('\\n');\n    selectionEnd = selectionStart + text.length;\n  } else {\n    text = lines.map(function (line) {\n      return prefix + line + suffix;\n    }).join('\\n');\n\n    if (surroundWithNewlines) {\n      var _newlinesToSurroundSe = newlinesToSurroundSelectedText(textarea),\n          newlinesToAppend = _newlinesToSurroundSe.newlinesToAppend,\n          newlinesToPrepend = _newlinesToSurroundSe.newlinesToPrepend;\n\n      selectionStart += newlinesToAppend.length;\n      selectionEnd = selectionStart + text.length;\n      text = newlinesToAppend + text + newlinesToPrepend;\n    }\n  }\n\n  return {\n    text: text,\n    selectionStart: selectionStart,\n    selectionEnd: selectionEnd\n  };\n}\n\nfunction orderedList(textarea) {\n  var orderedListRegex = /^\\d+\\.\\s+/;\n  var noInitialSelection = textarea.selectionStart === textarea.selectionEnd;\n  var selectionEnd;\n  var selectionStart;\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var textToUnstyle = text;\n  var lines = text.split('\\n');\n  var startOfLine;\n  var endOfLine;\n\n  if (noInitialSelection) {\n    var linesBefore = textarea.value.slice(0, textarea.selectionStart).split(/\\n/);\n    startOfLine = textarea.selectionStart - linesBefore[linesBefore.length - 1].length;\n    endOfLine = wordSelectionEnd(textarea.value, textarea.selectionStart, true);\n    textToUnstyle = textarea.value.slice(startOfLine, endOfLine);\n  }\n\n  var linesToUnstyle = textToUnstyle.split('\\n');\n  var undoStyling = linesToUnstyle.every(function (line) {\n    return orderedListRegex.test(line);\n  });\n\n  if (undoStyling) {\n    lines = linesToUnstyle.map(function (line) {\n      return line.replace(orderedListRegex, '');\n    });\n    text = lines.join('\\n');\n\n    if (noInitialSelection && startOfLine && endOfLine) {\n      var lengthDiff = linesToUnstyle[0].length - lines[0].length;\n      selectionStart = selectionEnd = textarea.selectionStart - lengthDiff;\n      textarea.selectionStart = startOfLine;\n      textarea.selectionEnd = endOfLine;\n    }\n  } else {\n    lines = function () {\n      var i;\n      var len;\n      var index;\n      var results = [];\n\n      for (index = i = 0, len = lines.length; i < len; index = ++i) {\n        var line = lines[index];\n        results.push(\"\".concat(index + 1, \". \").concat(line));\n      }\n\n      return results;\n    }();\n\n    text = lines.join('\\n');\n\n    var _newlinesToSurroundSe2 = newlinesToSurroundSelectedText(textarea),\n        newlinesToAppend = _newlinesToSurroundSe2.newlinesToAppend,\n        newlinesToPrepend = _newlinesToSurroundSe2.newlinesToPrepend;\n\n    selectionStart = textarea.selectionStart + newlinesToAppend.length;\n    selectionEnd = selectionStart + text.length;\n    if (noInitialSelection) selectionStart = selectionEnd;\n    text = newlinesToAppend + text + newlinesToPrepend;\n  }\n\n  return {\n    text: text,\n    selectionStart: selectionStart,\n    selectionEnd: selectionEnd\n  };\n}\n\nexport default MarkdownActions;","map":{"version":3,"sources":["/Users/inwoo/Projects/coldcallproject/coldcallproject/node_modules/@elastic/eui/es/components/markdown_editor/markdown_actions.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","prototype","obj","value","isPluginWithImmediateFormatting","MarkdownActions","editorID","uiPlugins","styles","reduce","mappedPlugins","plugin","name","mdBold","button","label","iconType","formatting","prefix","suffix","trimFirst","mdItalic","mdQuote","multiline","surroundWithNewlines","mdCode","blockPrefix","blockSuffix","mdLink","replaceNext","scanFor","mdUl","mdOl","orderedList","mdTl","_do","pluginName","applyStyle","incomingStyle","defaults","prefixSpace","outgoingStyle","editor","document","getElementById","focus","styleSelectedText","isMultipleLines","string","trim","split","repeat","n","Array","join","wordSelectionStart","text","index","match","wordSelectionEnd","breakpoint","MAX_TRIES","TRY_TIMEOUT","insertText","textarea","_ref","selectionStart","selectionEnd","originalSelectionStart","before","slice","after","tries","insertResult","execCommand","inputEvent","Event","bubbles","nativeInputValueSetter","window","HTMLTextAreaElement","set","call","dispatchEvent","setSelectionRange","focusTextarea","activeElement","setTimeout","styleArgs","result","multilineStyle","blockStyle","expandSelectedText","prefixToUse","suffixToUse","undefined","expandedSelectionStart","expandedSelectionEnd","beginsWithPrefix","endsWithSuffix","newlinesToSurroundSelectedText","beforeSelection","afterSelection","breaksBefore","breaksAfter","newlinesBeforeSelection","newlinesAfterSelection","newlinesToAppend","newlinesToPrepend","arg","originalSelectionEnd","selectedText","concat","hasReplaceNext","indexOf","ref","startsWith","endsWith","replacementText","position","Math","max","min","_replacementText","whitespaceEdges","leadingWhitespace","trailingWhitespace","replace","_replacementText2","_replacementText3","lines","undoStyle","every","line","map","_newlinesToSurroundSe","orderedListRegex","noInitialSelection","textToUnstyle","startOfLine","endOfLine","linesBefore","linesToUnstyle","undoStyling","test","lengthDiff","len","results","_newlinesToSurroundSe2"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n// The text-formatting logic & code in this file come from\n// https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n// under the following MIT license\n\n/*\nCopyright (c) 2017-2018 GitHub, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n */\nimport { isPluginWithImmediateFormatting } from './markdown_types';\n/**\n * Class for applying styles to a text editor. Accepts the HTML ID for the textarea\n * desired, and exposes the `.do(ACTION)` method for manipulating the text.\n *\n * @class MarkdownActions\n * @param {string} editorID\n */\n\nvar MarkdownActions = /*#__PURE__*/function () {\n  function MarkdownActions(editorID, uiPlugins) {\n    _classCallCheck(this, MarkdownActions);\n\n    this.editorID = editorID;\n\n    _defineProperty(this, \"styles\", void 0);\n\n    /**\n     * This object is in the format:\n     * [nameOfAction]: {[styles to apply]}\n     */\n    this.styles = _objectSpread(_objectSpread({}, uiPlugins.reduce(function (mappedPlugins, plugin) {\n      mappedPlugins[plugin.name] = plugin;\n      return mappedPlugins;\n    }, {})), {}, {\n      mdBold: {\n        name: 'mdBold',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '**',\n          suffix: '**',\n          trimFirst: true\n        }\n      },\n      mdItalic: {\n        name: 'mdItalic',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '_',\n          suffix: '_',\n          trimFirst: true\n        }\n      },\n      mdQuote: {\n        name: 'mdQuote',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '> ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      },\n      mdCode: {\n        name: 'mdCode',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '`',\n          suffix: '`',\n          blockPrefix: '```',\n          blockSuffix: '```'\n        }\n      },\n      mdLink: {\n        name: 'mdLink',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '[',\n          suffix: '](url)',\n          replaceNext: 'url',\n          scanFor: 'https?://'\n        }\n      },\n      mdUl: {\n        name: 'mdUl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '- ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      },\n      mdOl: {\n        name: 'mdOl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '1. ',\n          multiline: true,\n          orderedList: true\n        }\n      },\n      mdTl: {\n        name: 'mdTl',\n        button: {\n          label: '',\n          iconType: ''\n        },\n        formatting: {\n          prefix: '- [ ] ',\n          multiline: true,\n          surroundWithNewlines: true\n        }\n      }\n    });\n  }\n  /**\n   * .do() accepts a string and retrieves the correlating style object (defined in the\n   * constructor). It passes this to applyStyle() that does the text manipulation.\n   *\n   * @param {string} pluginName\n   * @memberof MarkdownActions\n   */\n\n\n  _createClass(MarkdownActions, [{\n    key: \"do\",\n    value: function _do(pluginName) {\n      var plugin = this.styles[pluginName];\n\n      if (isPluginWithImmediateFormatting(plugin)) {\n        this.applyStyle(plugin.formatting);\n        return true;\n      } else {\n        return plugin;\n      }\n    }\n    /**\n     * Sets the default styling object and then superimposes the changes to make on top of\n     * it. Calls the `styleSelectedText` helper function that does the heavy lifting.\n     * Adapted from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n     *\n     * @param {object} incomingStyle\n     * @memberof MarkdownActions\n     */\n\n  }, {\n    key: \"applyStyle\",\n    value: function applyStyle(incomingStyle) {\n      var defaults = {\n        prefix: '',\n        suffix: '',\n        blockPrefix: '',\n        blockSuffix: '',\n        multiline: false,\n        replaceNext: '',\n        prefixSpace: false,\n        scanFor: '',\n        surroundWithNewlines: false,\n        orderedList: false,\n        trimFirst: false\n      };\n\n      var outgoingStyle = _objectSpread(_objectSpread({}, defaults), incomingStyle);\n\n      var editor = document.getElementById(this.editorID);\n\n      if (editor) {\n        editor.focus();\n        styleSelectedText(editor, outgoingStyle);\n      }\n    }\n  }]);\n\n  return MarkdownActions;\n}();\n/**\n * The following helper functions and types were copied from the GitHub Markdown Toolbar\n * Element project. The project is MIT-licensed. See it here:\n * https://github.com/github/markdown-toolbar-element\n */\n\n\nfunction isMultipleLines(string) {\n  return string.trim().split('\\n').length > 1;\n}\n\nfunction repeat(string, n) {\n  return Array(n + 1).join(string);\n}\n\nfunction wordSelectionStart(text, i) {\n  var index = i;\n\n  while (text[index] && text[index - 1] != null && !text[index - 1].match(/\\s/)) {\n    index--;\n  }\n\n  return index;\n}\n\nfunction wordSelectionEnd(text, i, multiline) {\n  var index = i;\n  var breakpoint = multiline ? /\\n/ : /\\s/;\n\n  while (text[index] && !text[index].match(breakpoint)) {\n    index++;\n  }\n\n  return index;\n}\n\nvar MAX_TRIES = 10;\nvar TRY_TIMEOUT = 10;\n/*ms*/\n// modified from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n\nexport function insertText(textarea, _ref) {\n  var text = _ref.text,\n      selectionStart = _ref.selectionStart,\n      selectionEnd = _ref.selectionEnd;\n  var originalSelectionStart = textarea.selectionStart;\n  var before = textarea.value.slice(0, originalSelectionStart);\n  var after = textarea.value.slice(textarea.selectionEnd); // configuration modal/dialog will continue intercepting focus in Safari\n  // need to wait until the textarea can receive focus\n\n  var tries = 0;\n\n  var insertText = function insertText() {\n    var insertResult = document.execCommand('insertText', false, text);\n\n    if (insertResult === false) {\n      /**\n       * Fallback for Firefox; this kills undo/redo but at least updates the value\n       *\n       * Note that we're using the native HTMLTextAreaElement.set() method to play nicely with\n       * React's synthetic event system.\n       * https://hustle.bizongo.in/simulate-react-on-change-on-controlled-components-baa336920e04\n       */\n      var inputEvent = new Event('input', {\n        bubbles: true\n      });\n      var nativeInputValueSetter = Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype, 'value').set;\n      nativeInputValueSetter.call(textarea, before + text + after);\n      textarea.dispatchEvent(inputEvent);\n    }\n\n    if (selectionStart != null && selectionEnd != null) {\n      textarea.setSelectionRange(selectionStart, selectionEnd);\n    } else {\n      textarea.setSelectionRange(originalSelectionStart, textarea.selectionEnd);\n    }\n  };\n\n  var focusTextarea = function focusTextarea() {\n    textarea.focus();\n\n    if (document.activeElement === textarea) {\n      insertText();\n    } else if (++tries === MAX_TRIES) {\n      insertText();\n    } else {\n      setTimeout(focusTextarea, TRY_TIMEOUT);\n    }\n  };\n\n  focusTextarea();\n} // from https://github.com/github/markdown-toolbar-element/blob/main/src/index.ts\n\nfunction styleSelectedText(textarea, styleArgs) {\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var result;\n\n  if (styleArgs.orderedList) {\n    result = orderedList(textarea);\n  } else if (styleArgs.multiline && isMultipleLines(text)) {\n    result = multilineStyle(textarea, styleArgs);\n  } else {\n    result = blockStyle(textarea, styleArgs);\n  }\n\n  insertText(textarea, result);\n}\n\nfunction expandSelectedText(textarea, prefixToUse, suffixToUse) {\n  var multiline = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  if (textarea.selectionStart === textarea.selectionEnd) {\n    textarea.selectionStart = wordSelectionStart(textarea.value, textarea.selectionStart);\n    textarea.selectionEnd = wordSelectionEnd(textarea.value, textarea.selectionEnd, multiline);\n  } else {\n    var expandedSelectionStart = textarea.selectionStart - prefixToUse.length;\n    var expandedSelectionEnd = textarea.selectionEnd + suffixToUse.length;\n    var beginsWithPrefix = textarea.value.slice(expandedSelectionStart, textarea.selectionStart) === prefixToUse;\n    var endsWithSuffix = textarea.value.slice(textarea.selectionEnd, expandedSelectionEnd) === suffixToUse;\n\n    if (beginsWithPrefix && endsWithSuffix) {\n      textarea.selectionStart = expandedSelectionStart;\n      textarea.selectionEnd = expandedSelectionEnd;\n    }\n  }\n\n  return textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n}\n\nfunction newlinesToSurroundSelectedText(textarea) {\n  var beforeSelection = textarea.value.slice(0, textarea.selectionStart);\n  var afterSelection = textarea.value.slice(textarea.selectionEnd);\n  var breaksBefore = beforeSelection.match(/\\n*$/);\n  var breaksAfter = afterSelection.match(/^\\n*/);\n  var newlinesBeforeSelection = breaksBefore ? breaksBefore[0].length : 0;\n  var newlinesAfterSelection = breaksAfter ? breaksAfter[0].length : 0;\n  var newlinesToAppend;\n  var newlinesToPrepend;\n\n  if (beforeSelection.match(/\\S/) && newlinesBeforeSelection < 2) {\n    newlinesToAppend = repeat('\\n', 2 - newlinesBeforeSelection);\n  }\n\n  if (afterSelection.match(/\\S/) && newlinesAfterSelection < 2) {\n    newlinesToPrepend = repeat('\\n', 2 - newlinesAfterSelection);\n  }\n\n  if (newlinesToAppend == null) {\n    newlinesToAppend = '';\n  }\n\n  if (newlinesToPrepend == null) {\n    newlinesToPrepend = '';\n  }\n\n  return {\n    newlinesToAppend: newlinesToAppend,\n    newlinesToPrepend: newlinesToPrepend\n  };\n}\n\nfunction blockStyle(textarea, arg) {\n  var newlinesToAppend;\n  var newlinesToPrepend;\n  var prefix = arg.prefix,\n      suffix = arg.suffix,\n      blockPrefix = arg.blockPrefix,\n      blockSuffix = arg.blockSuffix,\n      replaceNext = arg.replaceNext,\n      prefixSpace = arg.prefixSpace,\n      scanFor = arg.scanFor,\n      surroundWithNewlines = arg.surroundWithNewlines;\n  var originalSelectionStart = textarea.selectionStart;\n  var originalSelectionEnd = textarea.selectionEnd;\n  var selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var prefixToUse = isMultipleLines(selectedText) && blockPrefix.length > 0 ? \"\".concat(blockPrefix, \"\\n\") : prefix;\n  var suffixToUse = isMultipleLines(selectedText) && blockSuffix.length > 0 ? \"\\n\".concat(blockSuffix) : suffix;\n\n  if (prefixSpace) {\n    var beforeSelection = textarea.value[textarea.selectionStart - 1];\n\n    if (textarea.selectionStart !== 0 && beforeSelection != null && !beforeSelection.match(/\\s/)) {\n      prefixToUse = \" \".concat(prefixToUse);\n    }\n  }\n\n  selectedText = expandSelectedText(textarea, prefixToUse, suffixToUse, arg.multiline);\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd;\n  var hasReplaceNext = replaceNext.length > 0 && suffixToUse.indexOf(replaceNext) > -1 && selectedText.length > 0;\n\n  if (surroundWithNewlines) {\n    var ref = newlinesToSurroundSelectedText(textarea);\n    newlinesToAppend = ref.newlinesToAppend;\n    newlinesToPrepend = ref.newlinesToPrepend;\n    prefixToUse = newlinesToAppend + prefix;\n    suffixToUse += newlinesToPrepend;\n  }\n\n  if (selectedText.startsWith(prefixToUse) && selectedText.endsWith(suffixToUse)) {\n    var replacementText = selectedText.slice(prefixToUse.length, selectedText.length - suffixToUse.length);\n\n    if (originalSelectionStart === originalSelectionEnd) {\n      var position = originalSelectionStart - prefixToUse.length;\n      position = Math.max(position, selectionStart);\n      position = Math.min(position, selectionStart + replacementText.length);\n      selectionStart = selectionEnd = position;\n    } else {\n      selectionEnd = selectionStart + replacementText.length;\n    }\n\n    return {\n      text: replacementText,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else if (!hasReplaceNext) {\n    var _replacementText = prefixToUse + selectedText + suffixToUse;\n\n    selectionStart = originalSelectionStart + prefixToUse.length;\n    selectionEnd = originalSelectionEnd + prefixToUse.length;\n    var whitespaceEdges = selectedText.match(/^\\s*|\\s*$/g);\n\n    if (arg.trimFirst && whitespaceEdges) {\n      var leadingWhitespace = whitespaceEdges[0] || '';\n      var trailingWhitespace = whitespaceEdges[1] || '';\n      _replacementText = leadingWhitespace + prefixToUse + selectedText.trim() + suffixToUse + trailingWhitespace;\n      selectionStart += leadingWhitespace.length;\n      selectionEnd -= trailingWhitespace.length;\n    }\n\n    return {\n      text: _replacementText,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else if (scanFor.length > 0 && selectedText.match(scanFor)) {\n    suffixToUse = suffixToUse.replace(replaceNext, selectedText);\n\n    var _replacementText2 = prefixToUse + suffixToUse;\n\n    selectionStart = selectionEnd = selectionStart + prefixToUse.length;\n    return {\n      text: _replacementText2,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  } else {\n    var _replacementText3 = prefixToUse + selectedText + suffixToUse;\n\n    selectionStart = selectionStart + prefixToUse.length + selectedText.length + suffixToUse.indexOf(replaceNext);\n    selectionEnd = selectionStart + replaceNext.length;\n    return {\n      text: _replacementText3,\n      selectionStart: selectionStart,\n      selectionEnd: selectionEnd\n    };\n  }\n}\n\nfunction multilineStyle(textarea, arg) {\n  var prefix = arg.prefix,\n      suffix = arg.suffix,\n      surroundWithNewlines = arg.surroundWithNewlines;\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd;\n  var lines = text.split('\\n');\n  var undoStyle = lines.every(function (line) {\n    return line.startsWith(prefix) && line.endsWith(suffix);\n  });\n\n  if (undoStyle) {\n    text = lines.map(function (line) {\n      return line.slice(prefix.length, line.length - suffix.length);\n    }).join('\\n');\n    selectionEnd = selectionStart + text.length;\n  } else {\n    text = lines.map(function (line) {\n      return prefix + line + suffix;\n    }).join('\\n');\n\n    if (surroundWithNewlines) {\n      var _newlinesToSurroundSe = newlinesToSurroundSelectedText(textarea),\n          newlinesToAppend = _newlinesToSurroundSe.newlinesToAppend,\n          newlinesToPrepend = _newlinesToSurroundSe.newlinesToPrepend;\n\n      selectionStart += newlinesToAppend.length;\n      selectionEnd = selectionStart + text.length;\n      text = newlinesToAppend + text + newlinesToPrepend;\n    }\n  }\n\n  return {\n    text: text,\n    selectionStart: selectionStart,\n    selectionEnd: selectionEnd\n  };\n}\n\nfunction orderedList(textarea) {\n  var orderedListRegex = /^\\d+\\.\\s+/;\n  var noInitialSelection = textarea.selectionStart === textarea.selectionEnd;\n  var selectionEnd;\n  var selectionStart;\n  var text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  var textToUnstyle = text;\n  var lines = text.split('\\n');\n  var startOfLine;\n  var endOfLine;\n\n  if (noInitialSelection) {\n    var linesBefore = textarea.value.slice(0, textarea.selectionStart).split(/\\n/);\n    startOfLine = textarea.selectionStart - linesBefore[linesBefore.length - 1].length;\n    endOfLine = wordSelectionEnd(textarea.value, textarea.selectionStart, true);\n    textToUnstyle = textarea.value.slice(startOfLine, endOfLine);\n  }\n\n  var linesToUnstyle = textToUnstyle.split('\\n');\n  var undoStyling = linesToUnstyle.every(function (line) {\n    return orderedListRegex.test(line);\n  });\n\n  if (undoStyling) {\n    lines = linesToUnstyle.map(function (line) {\n      return line.replace(orderedListRegex, '');\n    });\n    text = lines.join('\\n');\n\n    if (noInitialSelection && startOfLine && endOfLine) {\n      var lengthDiff = linesToUnstyle[0].length - lines[0].length;\n      selectionStart = selectionEnd = textarea.selectionStart - lengthDiff;\n      textarea.selectionStart = startOfLine;\n      textarea.selectionEnd = endOfLine;\n    }\n  } else {\n    lines = function () {\n      var i;\n      var len;\n      var index;\n      var results = [];\n\n      for (index = i = 0, len = lines.length; i < len; index = ++i) {\n        var line = lines[index];\n        results.push(\"\".concat(index + 1, \". \").concat(line));\n      }\n\n      return results;\n    }();\n\n    text = lines.join('\\n');\n\n    var _newlinesToSurroundSe2 = newlinesToSurroundSelectedText(textarea),\n        newlinesToAppend = _newlinesToSurroundSe2.newlinesToAppend,\n        newlinesToPrepend = _newlinesToSurroundSe2.newlinesToPrepend;\n\n    selectionStart = textarea.selectionStart + newlinesToAppend.length;\n    selectionEnd = selectionStart + text.length;\n    if (noInitialSelection) selectionStart = selectionEnd;\n    text = newlinesToAppend + text + newlinesToPrepend;\n  }\n\n  return {\n    text: text,\n    selectionStart: selectionStart,\n    selectionEnd: selectionEnd\n  };\n}\n\nexport default MarkdownActions;"]},"metadata":{},"sourceType":"module"}