{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e2) {\n          function e(_x) {\n            return _e2.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e2.toString();\n          };\n\n          return e;\n        }(function (e) {\n          throw e;\n        }),\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e3) {\n      function e(_x2) {\n        return _e3.apply(this, arguments);\n      }\n\n      e.toString = function () {\n        return _e3.toString();\n      };\n\n      return e;\n    }(function (e) {\n      didErr = true;\n      err = e;\n    }),\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nimport PropTypes from \"prop-types\";\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nimport React, { createElement, useEffect, useImperativeHandle, useMemo, useState, useCallback, useRef, forwardRef } from 'react';\nimport unified from 'unified';\nimport classNames from 'classnames';\nimport MarkdownActions, { insertText as _insertText } from './markdown_actions';\nimport { EuiMarkdownEditorToolbar } from './markdown_editor_toolbar';\nimport { EuiMarkdownEditorTextArea } from './markdown_editor_text_area';\nimport { EuiMarkdownFormat } from './markdown_format';\nimport { EuiMarkdownEditorDropZone } from './markdown_editor_drop_zone';\nimport { htmlIdGenerator } from '../../services/';\nimport { MODE_EDITING, MODE_VIEWING } from './markdown_modes';\nimport { EuiModal } from '../modal';\nimport { EuiMarkdownContext } from './markdown_context';\nimport * as MarkdownTooltip from './plugins/markdown_tooltip';\nimport { defaultParsingPlugins, defaultProcessingPlugins, defaultUiPlugins } from './plugins/markdown_default_plugins';\nimport { EuiResizeObserver } from '../observer/resize_observer'; // TODO I wanted to use the useCombinedRefs\n// but I can't because it's not allowed to use react hooks\n// inside a callback.\n\nvar mergeRefs = function mergeRefs() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  var filteredRefs = refs.filter(Boolean);\n  if (!filteredRefs.length) return null;\n  if (filteredRefs.length === 0) return filteredRefs[0];\n  return function (inst) {\n    var _iterator = _createForOfIteratorHelper(filteredRefs),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var ref = _step.value;\n\n        if (typeof ref === 'function') {\n          ref(inst);\n        } else if (ref) {\n          ref.current = inst;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n};\n\nfunction isNewLine(char) {\n  if (char == null) return true;\n  return !!char.match(/[\\r\\n]/);\n}\n\nfunction padWithNewlinesIfNeeded(textarea, text) {\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd; // block parsing requires two leading new lines and none trailing, but we add an extra trailing line for readability\n\n  var isPrevNewLine = isNewLine(textarea.value[selectionStart - 1]);\n  var isPrevPrevNewLine = isNewLine(textarea.value[selectionStart - 2]);\n  var isNextNewLine = isNewLine(textarea.value[selectionEnd]); // pad text with newlines as needed\n\n  text = \"\".concat(isPrevNewLine ? '' : '\\n').concat(isPrevPrevNewLine ? '' : '\\n').concat(text).concat(isNextNewLine ? '' : '\\n');\n  return text;\n}\n\nexport var EuiMarkdownEditor = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var className = _ref.className,\n      _editorId = _ref.editorId,\n      value = _ref.value,\n      _onChange = _ref.onChange,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 250 : _ref$height,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? 500 : _ref$maxHeight,\n      _ref$autoExpandPrevie = _ref.autoExpandPreview,\n      autoExpandPreview = _ref$autoExpandPrevie === void 0 ? true : _ref$autoExpandPrevie,\n      _ref$parsingPluginLis = _ref.parsingPluginList,\n      parsingPluginList = _ref$parsingPluginLis === void 0 ? defaultParsingPlugins : _ref$parsingPluginLis,\n      _ref$processingPlugin = _ref.processingPluginList,\n      processingPluginList = _ref$processingPlugin === void 0 ? defaultProcessingPlugins : _ref$processingPlugin,\n      _ref$uiPlugins = _ref.uiPlugins,\n      uiPlugins = _ref$uiPlugins === void 0 ? defaultUiPlugins : _ref$uiPlugins,\n      onParse = _ref.onParse,\n      _ref$errors = _ref.errors,\n      errors = _ref$errors === void 0 ? [] : _ref$errors,\n      ariaLabel = _ref['aria-label'],\n      ariaLabelledBy = _ref['aria-labelledby'],\n      ariaDescribedBy = _ref['aria-describedby'],\n      _ref$initialViewMode = _ref.initialViewMode,\n      initialViewMode = _ref$initialViewMode === void 0 ? MODE_EDITING : _ref$initialViewMode,\n      _ref$dropHandlers = _ref.dropHandlers,\n      dropHandlers = _ref$dropHandlers === void 0 ? [] : _ref$dropHandlers,\n      rest = _objectWithoutProperties(_ref, [\"className\", \"editorId\", \"value\", \"onChange\", \"height\", \"maxHeight\", \"autoExpandPreview\", \"parsingPluginList\", \"processingPluginList\", \"uiPlugins\", \"onParse\", \"errors\", \"aria-label\", \"aria-labelledby\", \"aria-describedby\", \"initialViewMode\", \"dropHandlers\"]);\n\n  var _useState = useState(initialViewMode),\n      _useState2 = _slicedToArray(_useState, 2),\n      viewMode = _useState2[0],\n      setViewMode = _useState2[1];\n\n  var editorId = useMemo(function () {\n    return _editorId || htmlIdGenerator()();\n  }, [_editorId]);\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pluginEditorPlugin = _useState4[0],\n      setPluginEditorPlugin = _useState4[1];\n\n  var toolbarPlugins = _toConsumableArray(uiPlugins); // @ts-ignore __originatedFromEui is a custom property\n\n\n  if (!uiPlugins.__originatedFromEui) {\n    toolbarPlugins.unshift(MarkdownTooltip.plugin);\n    console.warn('Deprecation warning: uiPlugins passed to EuiMarkdownEditor does not include the tooltip plugin, which has been added for you. This automatic inclusion has been deprecated and will be removed in the future, see https://github.com/elastic/eui/pull/4383');\n  }\n\n  var markdownActions = useMemo(function () {\n    return new MarkdownActions(editorId, toolbarPlugins);\n  }, // toolbarPlugins _is_ accounted for\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [editorId, toolbarPlugins.map(function (_ref2) {\n    var name = _ref2.name;\n    return name;\n  }).join(',')]);\n  var parser = useMemo(function () {\n    var Compiler = function Compiler(tree) {\n      return tree;\n    };\n\n    function identityCompiler() {\n      this.Compiler = Compiler;\n    }\n\n    return unified().use(parsingPluginList).use(identityCompiler);\n  }, [parsingPluginList]);\n\n  var _useMemo = useMemo(function () {\n    try {\n      var _parsed = parser.processSync(value);\n\n      return [_parsed, null];\n    } catch (e) {\n      return [null, e];\n    }\n  }, [parser, value]),\n      _useMemo2 = _slicedToArray(_useMemo, 2),\n      parsed = _useMemo2[0],\n      parseError = _useMemo2[1];\n\n  var isPreviewing = viewMode === MODE_VIEWING;\n  var isEditing = viewMode === MODE_EDITING;\n  var replaceNode = useCallback(function (position, next) {\n    var leading = value.substr(0, position.start.offset);\n    var trailing = value.substr(position.end.offset);\n\n    _onChange(\"\".concat(leading).concat(next).concat(trailing));\n  }, [value, _onChange]);\n  var contextValue = useMemo(function () {\n    return {\n      openPluginEditor: function openPluginEditor(plugin) {\n        return setPluginEditorPlugin(function () {\n          return plugin;\n        });\n      },\n      replaceNode: replaceNode\n    };\n  }, [replaceNode]);\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedNode = _useState6[0],\n      setSelectedNode = _useState6[1];\n\n  var textareaRef = useRef(null);\n  useEffect(function () {\n    if (textareaRef == null) return;\n    if (parsed == null) return;\n\n    var getCursorNode = function getCursorNode() {\n      var _parsed$result;\n\n      var _ref3 = textareaRef.current,\n          selectionStart = _ref3.selectionStart;\n      var node = (_parsed$result = parsed.result) !== null && _parsed$result !== void 0 ? _parsed$result : parsed.contents;\n\n      outer: while (true) {\n        if (node.children) {\n          for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n\n            if (child.position.start.offset < selectionStart && selectionStart < child.position.end.offset) {\n              if (child.type === 'text') break outer; // don't dive into `text` nodes\n\n              node = child;\n              continue outer;\n            }\n          }\n        }\n\n        break;\n      }\n\n      setSelectedNode(node);\n    };\n\n    var textarea = textareaRef.current;\n    textarea.addEventListener('keyup', getCursorNode);\n    textarea.addEventListener('mouseup', getCursorNode);\n    return function () {\n      textarea.removeEventListener('keyup', getCursorNode);\n      textarea.removeEventListener('mouseup', getCursorNode);\n    };\n  }, [parsed]);\n  useEffect(function () {\n    if (onParse) {\n      var _parsed$result2;\n\n      var messages = parsed ? parsed.messages : [];\n      var ast = parsed ? (_parsed$result2 = parsed.result) !== null && _parsed$result2 !== void 0 ? _parsed$result2 : parsed.contents : null;\n      onParse(parseError, {\n        messages: messages,\n        ast: ast\n      });\n    }\n  }, [onParse, parsed, parseError]);\n  useImperativeHandle(ref, function () {\n    return {\n      textarea: textareaRef.current,\n      replaceNode: replaceNode\n    };\n  }, [replaceNode]);\n  var textarea = textareaRef.current;\n  var previewRef = useRef(null);\n  var editorToolbarRef = useRef(null);\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      hasUnacceptedItems = _React$useState2[0],\n      setHasUnacceptedItems = _React$useState2[1];\n\n  var _useState7 = useState(height),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentHeight = _useState8[0],\n      setCurrentHeight = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      editorFooterHeight = _useState10[0],\n      setEditorFooterHeight = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      editorToolbarHeight = _useState12[0],\n      setEditorToolbarHeight = _useState12[1];\n\n  var classes = classNames('euiMarkdownEditor', {\n    'euiMarkdownEditor--fullHeight': height === 'full'\n  }, {\n    'euiMarkdownEditor--isPreviewing': isPreviewing\n  }, className);\n\n  var onResize = function onResize() {\n    if (textarea && isEditing && height !== 'full') {\n      var resizedTextareaHeight = textarea.offsetHeight + editorFooterHeight;\n      setCurrentHeight(resizedTextareaHeight);\n    }\n  };\n\n  useEffect(function () {\n    setEditorToolbarHeight(editorToolbarRef.current.offsetHeight);\n  }, [setEditorToolbarHeight]);\n  useEffect(function () {\n    if (isPreviewing && autoExpandPreview && height !== 'full') {\n      if (previewRef.current.scrollHeight > currentHeight) {\n        // scrollHeight does not include the border or margin\n        // so we ask for the computed value for those,\n        // which is always in pixels because getComputedValue\n        // returns the resolved values\n        var elementComputedStyle = window.getComputedStyle(previewRef.current);\n        var borderWidth = parseFloat(elementComputedStyle.borderTopWidth) + parseFloat(elementComputedStyle.borderBottomWidth);\n        var marginWidth = parseFloat(elementComputedStyle.marginTop) + parseFloat(elementComputedStyle.marginBottom); // then add an extra pixel for safety and because the scrollHeight value is rounded\n\n        var extraHeight = borderWidth + marginWidth + 1;\n        setCurrentHeight(previewRef.current.scrollHeight + extraHeight);\n      }\n    }\n  }, [currentHeight, isPreviewing, height, autoExpandPreview]);\n  var previewHeight = height === 'full' ? \"calc(100% - \".concat(editorFooterHeight, \"px)\") : currentHeight;\n  var textAreaHeight = height === 'full' ? '100%' : \"calc(\".concat(height - editorFooterHeight, \"px)\");\n  var textAreaMaxHeight = height !== 'full' ? \"\".concat(maxHeight - editorFooterHeight, \"px\") : ''; // safari needs this calc when the height is set to full\n\n  var editorToggleContainerHeight = \"calc(100% - \".concat(editorToolbarHeight, \"px)\");\n  return /*#__PURE__*/React.createElement(EuiMarkdownContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: classes\n  }, rest), /*#__PURE__*/React.createElement(EuiMarkdownEditorToolbar, {\n    ref: editorToolbarRef,\n    selectedNode: selectedNode,\n    markdownActions: markdownActions,\n    onClickPreview: function onClickPreview() {\n      return setViewMode(isPreviewing ? MODE_EDITING : MODE_VIEWING);\n    },\n    viewMode: viewMode,\n    uiPlugins: toolbarPlugins\n  }), isPreviewing && /*#__PURE__*/React.createElement(\"div\", {\n    ref: previewRef,\n    className: \"euiMarkdownEditorPreview\",\n    style: {\n      height: previewHeight\n    }\n  }, /*#__PURE__*/React.createElement(EuiMarkdownFormat, {\n    parsingPluginList: parsingPluginList,\n    processingPluginList: processingPluginList\n  }, value)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"euiMarkdownEditor__toggleContainer\",\n    style: {\n      height: editorToggleContainerHeight\n    }\n  }, /*#__PURE__*/React.createElement(EuiMarkdownEditorDropZone, {\n    setEditorFooterHeight: setEditorFooterHeight,\n    isEditing: isEditing,\n    dropHandlers: dropHandlers,\n    insertText: function insertText(text, config) {\n      if (config.block) {\n        text = padWithNewlinesIfNeeded(textareaRef.current, text);\n      }\n\n      var originalSelectionStart = textareaRef.current.selectionStart;\n      var newSelectionPoint = originalSelectionStart + text.length;\n\n      _insertText(textareaRef.current, {\n        text: text,\n        selectionStart: newSelectionPoint,\n        selectionEnd: newSelectionPoint\n      });\n    },\n    uiPlugins: toolbarPlugins,\n    errors: errors,\n    hasUnacceptedItems: hasUnacceptedItems,\n    setHasUnacceptedItems: setHasUnacceptedItems\n  }, /*#__PURE__*/React.createElement(EuiResizeObserver, {\n    onResize: onResize\n  }, function (resizeRef) {\n    return /*#__PURE__*/React.createElement(EuiMarkdownEditorTextArea, _extends({\n      height: textAreaHeight,\n      maxHeight: textAreaMaxHeight,\n      ref: mergeRefs(textareaRef, resizeRef),\n      id: editorId,\n      onChange: function onChange(e) {\n        return _onChange(e.target.value);\n      },\n      value: value,\n      onFocus: function onFocus() {\n        return setHasUnacceptedItems(false);\n      }\n    }, {\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy\n    }));\n  })), pluginEditorPlugin && /*#__PURE__*/React.createElement(EuiModal, {\n    onClose: function onClose() {\n      return setPluginEditorPlugin(undefined);\n    }\n  }, /*#__PURE__*/createElement(pluginEditorPlugin.editor, {\n    node: selectedNode && selectedNode.type === pluginEditorPlugin.name ? selectedNode : null,\n    onCancel: function onCancel() {\n      return setPluginEditorPlugin(undefined);\n    },\n    onSave: function onSave(markdown, config) {\n      if (selectedNode && selectedNode.type === pluginEditorPlugin.name) {\n        // modifying an existing node\n        textareaRef.current.setSelectionRange(selectedNode.position.start.offset, selectedNode.position.end.offset);\n      } else {\n        // creating a new node\n        if (config.block) {\n          // inject newlines if needed\n          markdown = padWithNewlinesIfNeeded(textareaRef.current, markdown);\n        }\n      }\n\n      _insertText(textareaRef.current, {\n        text: markdown,\n        selectionStart: undefined,\n        selectionEnd: undefined\n      });\n\n      setPluginEditorPlugin(undefined);\n    }\n  })))));\n});\nEuiMarkdownEditor.propTypes = {\n  className: PropTypes.string,\n\n  /** aria-label OR aria-labelledby must be set */\n  \"aria-label\": PropTypes.string,\n  \"data-test-subj\": PropTypes.string,\n\n  /** aria-label OR aria-labelledby must be set */\n  \"aria-labelledby\": PropTypes.string,\n\n  /** ID of an element describing the text editor, useful for associating error messages */\n  \"aria-describedby\": PropTypes.string,\n\n  /** a unique ID to attach to the textarea. If one isn't provided, a random one\n       * will be generated */\n  editorId: PropTypes.string,\n\n  /** A markdown content */\n  value: PropTypes.string.isRequired,\n\n  /** callback function when markdown content is modified */\n  onChange: PropTypes.func.isRequired,\n\n  /**\n       * Sets the `height` in pixels of the editor/preview area or pass `full` to allow\n       * the EuiMarkdownEditor to fill the height of its container.\n       * When in `full` mode the vertical resize is not allowed.\n       */\n  height: PropTypes.oneOfType([PropTypes.number.isRequired, PropTypes.oneOf([\"full\"])]),\n\n  /**\n       * Sets the `max-height` in pixels of the editor/preview area.\n       * It has no effect when the `height` is set to `full`.\n       */\n  maxHeight: PropTypes.number,\n\n  /**\n       * Automatically adjusts the preview height to fit all the content and avoid a scrollbar.\n       */\n  autoExpandPreview: PropTypes.bool,\n\n  /** plugins to identify new syntax and parse it into an AST node */\n  parsingPluginList: PropTypes.any,\n\n  /** plugins to process the markdown AST nodes into a React nodes */\n  processingPluginList: PropTypes.any,\n\n  /** defines UI for plugins' buttons in the toolbar as well as any modals or extra UI that provides content to the editor */\n  uiPlugins: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    button: PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      iconType: PropTypes.oneOfType([PropTypes.oneOf([\"accessibility\", \"addDataApp\", \"advancedSettingsApp\", \"aggregate\", \"alert\", \"analyzeEvent\", \"annotation\", \"apmApp\", \"apmTrace\", \"apps\", \"appSearchApp\", \"arrowDown\", \"arrowLeft\", \"arrowRight\", \"arrowUp\", \"asterisk\", \"auditbeatApp\", \"beaker\", \"bell\", \"bellSlash\", \"bolt\", \"boxesHorizontal\", \"boxesVertical\", \"branch\", \"broom\", \"brush\", \"bug\", \"bullseye\", \"calendar\", \"canvasApp\", \"codeApp\", \"check\", \"checkInCircleFilled\", \"cheer\", \"classificationJob\", \"clock\", \"cloudDrizzle\", \"cloudStormy\", \"cloudSunny\", \"compute\", \"console\", \"consoleApp\", \"controlsHorizontal\", \"controlsVertical\", \"copy\", \"copyClipboard\", \"createAdvancedJob\", \"createMultiMetricJob\", \"createPopulationJob\", \"createSingleMetricJob\", \"cross\", \"crossClusterReplicationApp\", \"crosshairs\", \"crossInACircleFilled\", \"currency\", \"cut\", \"dashboardApp\", \"database\", \"dataVisualizer\", \"devToolsApp\", \"discoverApp\", \"document\", \"documentEdit\", \"documents\", \"dot\", \"download\", \"editorAlignCenter\", \"editorAlignLeft\", \"editorAlignRight\", \"editorBold\", \"editorCodeBlock\", \"editorComment\", \"editorDistributeHorizontal\", \"editorDistributeVertical\", \"editorHeading\", \"editorItalic\", \"editorItemAlignLeft\", \"editorItemAlignBottom\", \"editorItemAlignCenter\", \"editorItemAlignMiddle\", \"editorItemAlignRight\", \"editorItemAlignTop\", \"editorLink\", \"editorOrderedList\", \"editorPositionBottomLeft\", \"editorPositionBottomRight\", \"editorPositionTopLeft\", \"editorPositionTopRight\", \"editorRedo\", \"editorStrike\", \"editorTable\", \"editorUnderline\", \"editorUndo\", \"editorUnorderedList\", \"email\", \"empty\", \"emsApp\", \"eql\", \"exit\", \"expand\", \"expandMini\", \"exportAction\", \"eye\", \"eyeClosed\", \"faceHappy\", \"faceNeutral\", \"faceSad\", \"filebeatApp\", \"filter\", \"flag\", \"fold\", \"folderCheck\", \"folderClosed\", \"folderExclamation\", \"folderOpen\", \"fullScreen\", \"gear\", \"gisApp\", \"glasses\", \"globe\", \"grab\", \"grabHorizontal\", \"graphApp\", \"grid\", \"grokApp\", \"heart\", \"heartbeatApp\", \"heatmap\", \"help\", \"home\", \"iInCircle\", \"image\", \"importAction\", \"indexClose\", \"indexEdit\", \"indexFlush\", \"indexManagementApp\", \"indexMapping\", \"indexOpen\", \"indexPatternApp\", \"indexRollupApp\", \"indexRuntime\", \"indexSettings\", \"inputOutput\", \"inspect\", \"invert\", \"ip\", \"keyboardShortcut\", \"kqlField\", \"kqlFunction\", \"kqlOperand\", \"kqlSelector\", \"kqlValue\", \"lensApp\", \"link\", \"list\", \"listAdd\", \"lock\", \"lockOpen\", \"logsApp\", \"logoAerospike\", \"logoApache\", \"logoAppSearch\", \"logoAWS\", \"logoAWSMono\", \"logoAzure\", \"logoAzureMono\", \"logoBeats\", \"logoBusinessAnalytics\", \"logoCeph\", \"logoCloud\", \"logoCloudEnterprise\", \"logoCode\", \"logoCodesandbox\", \"logoCouchbase\", \"logoDocker\", \"logoDropwizard\", \"logoElastic\", \"logoElasticsearch\", \"logoElasticStack\", \"logoEnterpriseSearch\", \"logoEtcd\", \"logoGCP\", \"logoGCPMono\", \"logoGithub\", \"logoGmail\", \"logoGolang\", \"logoGoogleG\", \"logoHAproxy\", \"logoIBM\", \"logoIBMMono\", \"logoKafka\", \"logoKibana\", \"logoKubernetes\", \"logoLogging\", \"logoLogstash\", \"logoMaps\", \"logoMemcached\", \"logoMetrics\", \"logoMongodb\", \"logoMySQL\", \"logoNginx\", \"logoObservability\", \"logoOsquery\", \"logoPhp\", \"logoPostgres\", \"logoPrometheus\", \"logoRabbitmq\", \"logoRedis\", \"logoSecurity\", \"logoSiteSearch\", \"logoSketch\", \"logoSlack\", \"logoUptime\", \"logoWebhook\", \"logoWindows\", \"logoWorkplaceSearch\", \"logstashFilter\", \"logstashIf\", \"logstashInput\", \"logstashOutput\", \"logstashQueue\", \"machineLearningApp\", \"magnet\", \"magnifyWithMinus\", \"magnifyWithPlus\", \"managementApp\", \"mapMarker\", \"memory\", \"menu\", \"menuDown\", \"menuLeft\", \"menuRight\", \"menuUp\", \"merge\", \"metricbeatApp\", \"metricsApp\", \"minimize\", \"minus\", \"minusInCircle\", \"minusInCircleFilled\", \"monitoringApp\", \"moon\", \"nested\", \"node\", \"notebookApp\", \"number\", \"offline\", \"online\", \"outlierDetectionJob\", \"package\", \"packetbeatApp\", \"pageSelect\", \"pagesSelect\", \"partial\", \"paperClip\", \"pause\", \"pencil\", \"pin\", \"pinFilled\", \"pipelineApp\", \"play\", \"plus\", \"plusInCircle\", \"plusInCircleFilled\", \"popout\", \"push\", \"questionInCircle\", \"quote\", \"recentlyViewedApp\", \"refresh\", \"regressionJob\", \"reporter\", \"reportingApp\", \"returnKey\", \"save\", \"savedObjectsApp\", \"scale\", \"search\", \"searchProfilerApp\", \"securityAnalyticsApp\", \"securityApp\", \"securitySignal\", \"securitySignalDetected\", \"securitySignalResolved\", \"shard\", \"share\", \"snowflake\", \"sortable\", \"sortDown\", \"sortLeft\", \"sortRight\", \"sortUp\", \"spacesApp\", \"sqlApp\", \"starEmpty\", \"starEmptySpace\", \"starFilled\", \"starFilledSpace\", \"starMinusEmpty\", \"starMinusFilled\", \"starPlusEmpty\", \"starPlusFilled\", \"stats\", \"stop\", \"stopFilled\", \"stopSlash\", \"storage\", \"string\", \"submodule\", \"swatchInput\", \"symlink\", \"tableOfContents\", \"tableDensityExpanded\", \"tableDensityCompact\", \"tableDensityNormal\", \"tag\", \"tear\", \"temperature\", \"timeline\", \"timelionApp\", \"training\", \"trash\", \"upgradeAssistantApp\", \"uptimeApp\", \"unfold\", \"unlink\", \"user\", \"users\", \"usersRolesApp\", \"vector\", \"videoPlayer\", \"visArea\", \"visAreaStacked\", \"visBarHorizontal\", \"visBarHorizontalStacked\", \"visBarVertical\", \"visBarVerticalStacked\", \"visGauge\", \"visGoal\", \"visLine\", \"visMapCoordinate\", \"visMapRegion\", \"visMetric\", \"visPie\", \"visTable\", \"visTagCloud\", \"visText\", \"visTimelion\", \"visualizeApp\", \"visVega\", \"visVisualBuilder\", \"watchesApp\", \"workplaceSearchApp\", \"wrench\", \"tokenClass\", \"tokenProperty\", \"tokenEnum\", \"tokenVariable\", \"tokenMethod\", \"tokenAnnotation\", \"tokenException\", \"tokenInterface\", \"tokenParameter\", \"tokenField\", \"tokenElement\", \"tokenFunction\", \"tokenBoolean\", \"tokenString\", \"tokenArray\", \"tokenNumber\", \"tokenConstant\", \"tokenObject\", \"tokenEvent\", \"tokenKey\", \"tokenNull\", \"tokenStruct\", \"tokenPackage\", \"tokenOperator\", \"tokenEnumMember\", \"tokenRepo\", \"tokenSymbol\", \"tokenFile\", \"tokenModule\", \"tokenNamespace\", \"tokenDate\", \"tokenIP\", \"tokenNested\", \"tokenAlias\", \"tokenShape\", \"tokenGeo\", \"tokenRange\", \"tokenBinary\", \"tokenJoin\", \"tokenPercolator\", \"tokenFlattened\", \"tokenRankFeature\", \"tokenRankFeatures\", \"tokenKeyword\", \"tokenCompletionSuggester\", \"tokenDenseVector\", \"tokenText\", \"tokenTokenCount\", \"tokenSearchType\", \"tokenHistogram\"]).isRequired, PropTypes.string.isRequired, PropTypes.elementType.isRequired]).isRequired\n    }).isRequired,\n    helpText: PropTypes.node,\n    formatting: PropTypes.shape({\n      prefix: PropTypes.string,\n      suffix: PropTypes.string,\n      blockPrefix: PropTypes.string,\n      blockSuffix: PropTypes.string,\n      multiline: PropTypes.bool,\n      replaceNext: PropTypes.string,\n      prefixSpace: PropTypes.bool,\n      scanFor: PropTypes.string,\n      surroundWithNewlines: PropTypes.bool,\n      orderedList: PropTypes.bool,\n      trimFirst: PropTypes.bool\n    }),\n    editor: PropTypes.elementType\n  }).isRequired),\n\n  /** errors to bubble up */\n  errors: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.any.isRequired, PropTypes.any.isRequired]).isRequired),\n\n  /** callback triggered when parsing results are available */\n  onParse: PropTypes.func,\n\n  /** initial display mode for the editor */\n  initialViewMode: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.any.isRequired]),\n\n  /** array defining any drag&drop handlers */\n  dropHandlers: PropTypes.arrayOf(PropTypes.shape({\n    supportedFiles: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n    accepts: PropTypes.func.isRequired,\n    getFormattingForItem: PropTypes.func.isRequired\n  }).isRequired)\n};\nEuiMarkdownEditor.displayName = 'EuiMarkdownEditor';","map":{"version":3,"sources":["/Users/inwoo/Projects/coldcallproject/coldcallproject/node_modules/@elastic/eui/es/components/markdown_editor/markdown_editor.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","err","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_createForOfIteratorHelper","o","allowArrayLike","it","F","s","n","e","_e2","_x","toString","f","normalCompletion","didErr","step","_e3","_x2","return","PropTypes","minLen","slice","constructor","name","test","len","arr2","React","createElement","useEffect","useImperativeHandle","useMemo","useState","useCallback","useRef","forwardRef","unified","classNames","MarkdownActions","insertText","_insertText","EuiMarkdownEditorToolbar","EuiMarkdownEditorTextArea","EuiMarkdownFormat","EuiMarkdownEditorDropZone","htmlIdGenerator","MODE_EDITING","MODE_VIEWING","EuiModal","EuiMarkdownContext","MarkdownTooltip","defaultParsingPlugins","defaultProcessingPlugins","defaultUiPlugins","EuiResizeObserver","mergeRefs","_len","refs","_key","filteredRefs","filter","Boolean","inst","_iterator","_step","ref","current","isNewLine","char","match","padWithNewlinesIfNeeded","textarea","text","selectionStart","selectionEnd","isPrevNewLine","isPrevPrevNewLine","isNextNewLine","concat","EuiMarkdownEditor","_ref","className","_editorId","editorId","_onChange","onChange","_ref$height","height","_ref$maxHeight","maxHeight","_ref$autoExpandPrevie","autoExpandPreview","_ref$parsingPluginLis","parsingPluginList","_ref$processingPlugin","processingPluginList","_ref$uiPlugins","uiPlugins","onParse","_ref$errors","errors","ariaLabel","ariaLabelledBy","ariaDescribedBy","_ref$initialViewMode","initialViewMode","_ref$dropHandlers","dropHandlers","rest","_useState","_useState2","viewMode","setViewMode","_useState3","_useState4","pluginEditorPlugin","setPluginEditorPlugin","toolbarPlugins","__originatedFromEui","unshift","plugin","console","warn","markdownActions","map","_ref2","join","parser","Compiler","tree","identityCompiler","use","_useMemo","_parsed","processSync","_useMemo2","parsed","parseError","isPreviewing","isEditing","replaceNode","position","leading","substr","start","offset","trailing","end","contextValue","openPluginEditor","_useState5","_useState6","selectedNode","setSelectedNode","textareaRef","getCursorNode","_parsed$result","_ref3","node","result","contents","outer","children","child","type","addEventListener","removeEventListener","_parsed$result2","messages","ast","previewRef","editorToolbarRef","_React$useState","_React$useState2","hasUnacceptedItems","setHasUnacceptedItems","_useState7","_useState8","currentHeight","setCurrentHeight","_useState9","_useState10","editorFooterHeight","setEditorFooterHeight","_useState11","_useState12","editorToolbarHeight","setEditorToolbarHeight","classes","onResize","resizedTextareaHeight","offsetHeight","scrollHeight","elementComputedStyle","window","getComputedStyle","borderWidth","parseFloat","borderTopWidth","borderBottomWidth","marginWidth","marginTop","marginBottom","extraHeight","previewHeight","textAreaHeight","textAreaMaxHeight","editorToggleContainerHeight","Provider","onClickPreview","style","config","block","originalSelectionStart","newSelectionPoint","resizeRef","id","onFocus","onClose","editor","onCancel","onSave","markdown","setSelectionRange","propTypes","string","isRequired","func","oneOfType","number","oneOf","bool","any","arrayOf","shape","button","label","iconType","elementType","helpText","formatting","prefix","suffix","blockPrefix","blockSuffix","multiline","replaceNext","prefixSpace","scanFor","surroundWithNewlines","orderedList","trimFirst","supportedFiles","accepts","getFormattingForItem","displayName"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function (_e2) { function e(_x) { return _e2.apply(this, arguments); } e.toString = function () { return _e2.toString(); }; return e; }(function (e) { throw e; }), f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function (_e3) { function e(_x2) { return _e3.apply(this, arguments); } e.toString = function () { return _e3.toString(); }; return e; }(function (e) { didErr = true; err = e; }), f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nimport PropTypes from \"prop-types\";\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\n * Licensed to Elasticsearch B.V. under one or more contributor\n * license agreements. See the NOTICE file distributed with\n * this work for additional information regarding copyright\n * ownership. Elasticsearch B.V. licenses this file to you under\n * the Apache License, Version 2.0 (the \"License\"); you may\n * not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { createElement, useEffect, useImperativeHandle, useMemo, useState, useCallback, useRef, forwardRef } from 'react';\nimport unified from 'unified';\nimport classNames from 'classnames';\nimport MarkdownActions, { insertText as _insertText } from './markdown_actions';\nimport { EuiMarkdownEditorToolbar } from './markdown_editor_toolbar';\nimport { EuiMarkdownEditorTextArea } from './markdown_editor_text_area';\nimport { EuiMarkdownFormat } from './markdown_format';\nimport { EuiMarkdownEditorDropZone } from './markdown_editor_drop_zone';\nimport { htmlIdGenerator } from '../../services/';\nimport { MODE_EDITING, MODE_VIEWING } from './markdown_modes';\nimport { EuiModal } from '../modal';\nimport { EuiMarkdownContext } from './markdown_context';\nimport * as MarkdownTooltip from './plugins/markdown_tooltip';\nimport { defaultParsingPlugins, defaultProcessingPlugins, defaultUiPlugins } from './plugins/markdown_default_plugins';\nimport { EuiResizeObserver } from '../observer/resize_observer';\n\n// TODO I wanted to use the useCombinedRefs\n// but I can't because it's not allowed to use react hooks\n// inside a callback.\nvar mergeRefs = function mergeRefs() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  var filteredRefs = refs.filter(Boolean);\n  if (!filteredRefs.length) return null;\n  if (filteredRefs.length === 0) return filteredRefs[0];\n  return function (inst) {\n    var _iterator = _createForOfIteratorHelper(filteredRefs),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var ref = _step.value;\n\n        if (typeof ref === 'function') {\n          ref(inst);\n        } else if (ref) {\n          ref.current = inst;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n};\n\nfunction isNewLine(char) {\n  if (char == null) return true;\n  return !!char.match(/[\\r\\n]/);\n}\n\nfunction padWithNewlinesIfNeeded(textarea, text) {\n  var selectionStart = textarea.selectionStart;\n  var selectionEnd = textarea.selectionEnd; // block parsing requires two leading new lines and none trailing, but we add an extra trailing line for readability\n\n  var isPrevNewLine = isNewLine(textarea.value[selectionStart - 1]);\n  var isPrevPrevNewLine = isNewLine(textarea.value[selectionStart - 2]);\n  var isNextNewLine = isNewLine(textarea.value[selectionEnd]); // pad text with newlines as needed\n\n  text = \"\".concat(isPrevNewLine ? '' : '\\n').concat(isPrevPrevNewLine ? '' : '\\n').concat(text).concat(isNextNewLine ? '' : '\\n');\n  return text;\n}\n\nexport var EuiMarkdownEditor = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var className = _ref.className,\n      _editorId = _ref.editorId,\n      value = _ref.value,\n      _onChange = _ref.onChange,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 250 : _ref$height,\n      _ref$maxHeight = _ref.maxHeight,\n      maxHeight = _ref$maxHeight === void 0 ? 500 : _ref$maxHeight,\n      _ref$autoExpandPrevie = _ref.autoExpandPreview,\n      autoExpandPreview = _ref$autoExpandPrevie === void 0 ? true : _ref$autoExpandPrevie,\n      _ref$parsingPluginLis = _ref.parsingPluginList,\n      parsingPluginList = _ref$parsingPluginLis === void 0 ? defaultParsingPlugins : _ref$parsingPluginLis,\n      _ref$processingPlugin = _ref.processingPluginList,\n      processingPluginList = _ref$processingPlugin === void 0 ? defaultProcessingPlugins : _ref$processingPlugin,\n      _ref$uiPlugins = _ref.uiPlugins,\n      uiPlugins = _ref$uiPlugins === void 0 ? defaultUiPlugins : _ref$uiPlugins,\n      onParse = _ref.onParse,\n      _ref$errors = _ref.errors,\n      errors = _ref$errors === void 0 ? [] : _ref$errors,\n      ariaLabel = _ref['aria-label'],\n      ariaLabelledBy = _ref['aria-labelledby'],\n      ariaDescribedBy = _ref['aria-describedby'],\n      _ref$initialViewMode = _ref.initialViewMode,\n      initialViewMode = _ref$initialViewMode === void 0 ? MODE_EDITING : _ref$initialViewMode,\n      _ref$dropHandlers = _ref.dropHandlers,\n      dropHandlers = _ref$dropHandlers === void 0 ? [] : _ref$dropHandlers,\n      rest = _objectWithoutProperties(_ref, [\"className\", \"editorId\", \"value\", \"onChange\", \"height\", \"maxHeight\", \"autoExpandPreview\", \"parsingPluginList\", \"processingPluginList\", \"uiPlugins\", \"onParse\", \"errors\", \"aria-label\", \"aria-labelledby\", \"aria-describedby\", \"initialViewMode\", \"dropHandlers\"]);\n\n  var _useState = useState(initialViewMode),\n      _useState2 = _slicedToArray(_useState, 2),\n      viewMode = _useState2[0],\n      setViewMode = _useState2[1];\n\n  var editorId = useMemo(function () {\n    return _editorId || htmlIdGenerator()();\n  }, [_editorId]);\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pluginEditorPlugin = _useState4[0],\n      setPluginEditorPlugin = _useState4[1];\n\n  var toolbarPlugins = _toConsumableArray(uiPlugins); // @ts-ignore __originatedFromEui is a custom property\n\n\n  if (!uiPlugins.__originatedFromEui) {\n    toolbarPlugins.unshift(MarkdownTooltip.plugin);\n    console.warn('Deprecation warning: uiPlugins passed to EuiMarkdownEditor does not include the tooltip plugin, which has been added for you. This automatic inclusion has been deprecated and will be removed in the future, see https://github.com/elastic/eui/pull/4383');\n  }\n\n  var markdownActions = useMemo(function () {\n    return new MarkdownActions(editorId, toolbarPlugins);\n  }, // toolbarPlugins _is_ accounted for\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [editorId, toolbarPlugins.map(function (_ref2) {\n    var name = _ref2.name;\n    return name;\n  }).join(',')]);\n  var parser = useMemo(function () {\n    var Compiler = function Compiler(tree) {\n      return tree;\n    };\n\n    function identityCompiler() {\n      this.Compiler = Compiler;\n    }\n\n    return unified().use(parsingPluginList).use(identityCompiler);\n  }, [parsingPluginList]);\n\n  var _useMemo = useMemo(function () {\n    try {\n      var _parsed = parser.processSync(value);\n\n      return [_parsed, null];\n    } catch (e) {\n      return [null, e];\n    }\n  }, [parser, value]),\n      _useMemo2 = _slicedToArray(_useMemo, 2),\n      parsed = _useMemo2[0],\n      parseError = _useMemo2[1];\n\n  var isPreviewing = viewMode === MODE_VIEWING;\n  var isEditing = viewMode === MODE_EDITING;\n  var replaceNode = useCallback(function (position, next) {\n    var leading = value.substr(0, position.start.offset);\n    var trailing = value.substr(position.end.offset);\n\n    _onChange(\"\".concat(leading).concat(next).concat(trailing));\n  }, [value, _onChange]);\n  var contextValue = useMemo(function () {\n    return {\n      openPluginEditor: function openPluginEditor(plugin) {\n        return setPluginEditorPlugin(function () {\n          return plugin;\n        });\n      },\n      replaceNode: replaceNode\n    };\n  }, [replaceNode]);\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedNode = _useState6[0],\n      setSelectedNode = _useState6[1];\n\n  var textareaRef = useRef(null);\n  useEffect(function () {\n    if (textareaRef == null) return;\n    if (parsed == null) return;\n\n    var getCursorNode = function getCursorNode() {\n      var _parsed$result;\n\n      var _ref3 = textareaRef.current,\n          selectionStart = _ref3.selectionStart;\n      var node = (_parsed$result = parsed.result) !== null && _parsed$result !== void 0 ? _parsed$result : parsed.contents;\n\n      outer: while (true) {\n        if (node.children) {\n          for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n\n            if (child.position.start.offset < selectionStart && selectionStart < child.position.end.offset) {\n              if (child.type === 'text') break outer; // don't dive into `text` nodes\n\n              node = child;\n              continue outer;\n            }\n          }\n        }\n\n        break;\n      }\n\n      setSelectedNode(node);\n    };\n\n    var textarea = textareaRef.current;\n    textarea.addEventListener('keyup', getCursorNode);\n    textarea.addEventListener('mouseup', getCursorNode);\n    return function () {\n      textarea.removeEventListener('keyup', getCursorNode);\n      textarea.removeEventListener('mouseup', getCursorNode);\n    };\n  }, [parsed]);\n  useEffect(function () {\n    if (onParse) {\n      var _parsed$result2;\n\n      var messages = parsed ? parsed.messages : [];\n      var ast = parsed ? (_parsed$result2 = parsed.result) !== null && _parsed$result2 !== void 0 ? _parsed$result2 : parsed.contents : null;\n      onParse(parseError, {\n        messages: messages,\n        ast: ast\n      });\n    }\n  }, [onParse, parsed, parseError]);\n  useImperativeHandle(ref, function () {\n    return {\n      textarea: textareaRef.current,\n      replaceNode: replaceNode\n    };\n  }, [replaceNode]);\n  var textarea = textareaRef.current;\n  var previewRef = useRef(null);\n  var editorToolbarRef = useRef(null);\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      hasUnacceptedItems = _React$useState2[0],\n      setHasUnacceptedItems = _React$useState2[1];\n\n  var _useState7 = useState(height),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentHeight = _useState8[0],\n      setCurrentHeight = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      editorFooterHeight = _useState10[0],\n      setEditorFooterHeight = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      editorToolbarHeight = _useState12[0],\n      setEditorToolbarHeight = _useState12[1];\n\n  var classes = classNames('euiMarkdownEditor', {\n    'euiMarkdownEditor--fullHeight': height === 'full'\n  }, {\n    'euiMarkdownEditor--isPreviewing': isPreviewing\n  }, className);\n\n  var onResize = function onResize() {\n    if (textarea && isEditing && height !== 'full') {\n      var resizedTextareaHeight = textarea.offsetHeight + editorFooterHeight;\n      setCurrentHeight(resizedTextareaHeight);\n    }\n  };\n\n  useEffect(function () {\n    setEditorToolbarHeight(editorToolbarRef.current.offsetHeight);\n  }, [setEditorToolbarHeight]);\n  useEffect(function () {\n    if (isPreviewing && autoExpandPreview && height !== 'full') {\n      if (previewRef.current.scrollHeight > currentHeight) {\n        // scrollHeight does not include the border or margin\n        // so we ask for the computed value for those,\n        // which is always in pixels because getComputedValue\n        // returns the resolved values\n        var elementComputedStyle = window.getComputedStyle(previewRef.current);\n        var borderWidth = parseFloat(elementComputedStyle.borderTopWidth) + parseFloat(elementComputedStyle.borderBottomWidth);\n        var marginWidth = parseFloat(elementComputedStyle.marginTop) + parseFloat(elementComputedStyle.marginBottom); // then add an extra pixel for safety and because the scrollHeight value is rounded\n\n        var extraHeight = borderWidth + marginWidth + 1;\n        setCurrentHeight(previewRef.current.scrollHeight + extraHeight);\n      }\n    }\n  }, [currentHeight, isPreviewing, height, autoExpandPreview]);\n  var previewHeight = height === 'full' ? \"calc(100% - \".concat(editorFooterHeight, \"px)\") : currentHeight;\n  var textAreaHeight = height === 'full' ? '100%' : \"calc(\".concat(height - editorFooterHeight, \"px)\");\n  var textAreaMaxHeight = height !== 'full' ? \"\".concat(maxHeight - editorFooterHeight, \"px\") : ''; // safari needs this calc when the height is set to full\n\n  var editorToggleContainerHeight = \"calc(100% - \".concat(editorToolbarHeight, \"px)\");\n  return /*#__PURE__*/React.createElement(EuiMarkdownContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: classes\n  }, rest), /*#__PURE__*/React.createElement(EuiMarkdownEditorToolbar, {\n    ref: editorToolbarRef,\n    selectedNode: selectedNode,\n    markdownActions: markdownActions,\n    onClickPreview: function onClickPreview() {\n      return setViewMode(isPreviewing ? MODE_EDITING : MODE_VIEWING);\n    },\n    viewMode: viewMode,\n    uiPlugins: toolbarPlugins\n  }), isPreviewing && /*#__PURE__*/React.createElement(\"div\", {\n    ref: previewRef,\n    className: \"euiMarkdownEditorPreview\",\n    style: {\n      height: previewHeight\n    }\n  }, /*#__PURE__*/React.createElement(EuiMarkdownFormat, {\n    parsingPluginList: parsingPluginList,\n    processingPluginList: processingPluginList\n  }, value)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"euiMarkdownEditor__toggleContainer\",\n    style: {\n      height: editorToggleContainerHeight\n    }\n  }, /*#__PURE__*/React.createElement(EuiMarkdownEditorDropZone, {\n    setEditorFooterHeight: setEditorFooterHeight,\n    isEditing: isEditing,\n    dropHandlers: dropHandlers,\n    insertText: function insertText(text, config) {\n      if (config.block) {\n        text = padWithNewlinesIfNeeded(textareaRef.current, text);\n      }\n\n      var originalSelectionStart = textareaRef.current.selectionStart;\n      var newSelectionPoint = originalSelectionStart + text.length;\n\n      _insertText(textareaRef.current, {\n        text: text,\n        selectionStart: newSelectionPoint,\n        selectionEnd: newSelectionPoint\n      });\n    },\n    uiPlugins: toolbarPlugins,\n    errors: errors,\n    hasUnacceptedItems: hasUnacceptedItems,\n    setHasUnacceptedItems: setHasUnacceptedItems\n  }, /*#__PURE__*/React.createElement(EuiResizeObserver, {\n    onResize: onResize\n  }, function (resizeRef) {\n    return /*#__PURE__*/React.createElement(EuiMarkdownEditorTextArea, _extends({\n      height: textAreaHeight,\n      maxHeight: textAreaMaxHeight,\n      ref: mergeRefs(textareaRef, resizeRef),\n      id: editorId,\n      onChange: function onChange(e) {\n        return _onChange(e.target.value);\n      },\n      value: value,\n      onFocus: function onFocus() {\n        return setHasUnacceptedItems(false);\n      }\n    }, {\n      'aria-label': ariaLabel,\n      'aria-labelledby': ariaLabelledBy,\n      'aria-describedby': ariaDescribedBy\n    }));\n  })), pluginEditorPlugin && /*#__PURE__*/React.createElement(EuiModal, {\n    onClose: function onClose() {\n      return setPluginEditorPlugin(undefined);\n    }\n  }, /*#__PURE__*/createElement(pluginEditorPlugin.editor, {\n    node: selectedNode && selectedNode.type === pluginEditorPlugin.name ? selectedNode : null,\n    onCancel: function onCancel() {\n      return setPluginEditorPlugin(undefined);\n    },\n    onSave: function onSave(markdown, config) {\n      if (selectedNode && selectedNode.type === pluginEditorPlugin.name) {\n        // modifying an existing node\n        textareaRef.current.setSelectionRange(selectedNode.position.start.offset, selectedNode.position.end.offset);\n      } else {\n        // creating a new node\n        if (config.block) {\n          // inject newlines if needed\n          markdown = padWithNewlinesIfNeeded(textareaRef.current, markdown);\n        }\n      }\n\n      _insertText(textareaRef.current, {\n        text: markdown,\n        selectionStart: undefined,\n        selectionEnd: undefined\n      });\n\n      setPluginEditorPlugin(undefined);\n    }\n  })))));\n});\nEuiMarkdownEditor.propTypes = {\n  className: PropTypes.string,\n\n  /** aria-label OR aria-labelledby must be set */\n  \"aria-label\": PropTypes.string,\n  \"data-test-subj\": PropTypes.string,\n\n  /** aria-label OR aria-labelledby must be set */\n  \"aria-labelledby\": PropTypes.string,\n\n  /** ID of an element describing the text editor, useful for associating error messages */\n  \"aria-describedby\": PropTypes.string,\n\n  /** a unique ID to attach to the textarea. If one isn't provided, a random one\n       * will be generated */\n  editorId: PropTypes.string,\n\n  /** A markdown content */\n  value: PropTypes.string.isRequired,\n\n  /** callback function when markdown content is modified */\n  onChange: PropTypes.func.isRequired,\n\n  /**\n       * Sets the `height` in pixels of the editor/preview area or pass `full` to allow\n       * the EuiMarkdownEditor to fill the height of its container.\n       * When in `full` mode the vertical resize is not allowed.\n       */\n  height: PropTypes.oneOfType([PropTypes.number.isRequired, PropTypes.oneOf([\"full\"])]),\n\n  /**\n       * Sets the `max-height` in pixels of the editor/preview area.\n       * It has no effect when the `height` is set to `full`.\n       */\n  maxHeight: PropTypes.number,\n\n  /**\n       * Automatically adjusts the preview height to fit all the content and avoid a scrollbar.\n       */\n  autoExpandPreview: PropTypes.bool,\n\n  /** plugins to identify new syntax and parse it into an AST node */\n  parsingPluginList: PropTypes.any,\n\n  /** plugins to process the markdown AST nodes into a React nodes */\n  processingPluginList: PropTypes.any,\n\n  /** defines UI for plugins' buttons in the toolbar as well as any modals or extra UI that provides content to the editor */\n  uiPlugins: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    button: PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      iconType: PropTypes.oneOfType([PropTypes.oneOf([\"accessibility\", \"addDataApp\", \"advancedSettingsApp\", \"aggregate\", \"alert\", \"analyzeEvent\", \"annotation\", \"apmApp\", \"apmTrace\", \"apps\", \"appSearchApp\", \"arrowDown\", \"arrowLeft\", \"arrowRight\", \"arrowUp\", \"asterisk\", \"auditbeatApp\", \"beaker\", \"bell\", \"bellSlash\", \"bolt\", \"boxesHorizontal\", \"boxesVertical\", \"branch\", \"broom\", \"brush\", \"bug\", \"bullseye\", \"calendar\", \"canvasApp\", \"codeApp\", \"check\", \"checkInCircleFilled\", \"cheer\", \"classificationJob\", \"clock\", \"cloudDrizzle\", \"cloudStormy\", \"cloudSunny\", \"compute\", \"console\", \"consoleApp\", \"controlsHorizontal\", \"controlsVertical\", \"copy\", \"copyClipboard\", \"createAdvancedJob\", \"createMultiMetricJob\", \"createPopulationJob\", \"createSingleMetricJob\", \"cross\", \"crossClusterReplicationApp\", \"crosshairs\", \"crossInACircleFilled\", \"currency\", \"cut\", \"dashboardApp\", \"database\", \"dataVisualizer\", \"devToolsApp\", \"discoverApp\", \"document\", \"documentEdit\", \"documents\", \"dot\", \"download\", \"editorAlignCenter\", \"editorAlignLeft\", \"editorAlignRight\", \"editorBold\", \"editorCodeBlock\", \"editorComment\", \"editorDistributeHorizontal\", \"editorDistributeVertical\", \"editorHeading\", \"editorItalic\", \"editorItemAlignLeft\", \"editorItemAlignBottom\", \"editorItemAlignCenter\", \"editorItemAlignMiddle\", \"editorItemAlignRight\", \"editorItemAlignTop\", \"editorLink\", \"editorOrderedList\", \"editorPositionBottomLeft\", \"editorPositionBottomRight\", \"editorPositionTopLeft\", \"editorPositionTopRight\", \"editorRedo\", \"editorStrike\", \"editorTable\", \"editorUnderline\", \"editorUndo\", \"editorUnorderedList\", \"email\", \"empty\", \"emsApp\", \"eql\", \"exit\", \"expand\", \"expandMini\", \"exportAction\", \"eye\", \"eyeClosed\", \"faceHappy\", \"faceNeutral\", \"faceSad\", \"filebeatApp\", \"filter\", \"flag\", \"fold\", \"folderCheck\", \"folderClosed\", \"folderExclamation\", \"folderOpen\", \"fullScreen\", \"gear\", \"gisApp\", \"glasses\", \"globe\", \"grab\", \"grabHorizontal\", \"graphApp\", \"grid\", \"grokApp\", \"heart\", \"heartbeatApp\", \"heatmap\", \"help\", \"home\", \"iInCircle\", \"image\", \"importAction\", \"indexClose\", \"indexEdit\", \"indexFlush\", \"indexManagementApp\", \"indexMapping\", \"indexOpen\", \"indexPatternApp\", \"indexRollupApp\", \"indexRuntime\", \"indexSettings\", \"inputOutput\", \"inspect\", \"invert\", \"ip\", \"keyboardShortcut\", \"kqlField\", \"kqlFunction\", \"kqlOperand\", \"kqlSelector\", \"kqlValue\", \"lensApp\", \"link\", \"list\", \"listAdd\", \"lock\", \"lockOpen\", \"logsApp\", \"logoAerospike\", \"logoApache\", \"logoAppSearch\", \"logoAWS\", \"logoAWSMono\", \"logoAzure\", \"logoAzureMono\", \"logoBeats\", \"logoBusinessAnalytics\", \"logoCeph\", \"logoCloud\", \"logoCloudEnterprise\", \"logoCode\", \"logoCodesandbox\", \"logoCouchbase\", \"logoDocker\", \"logoDropwizard\", \"logoElastic\", \"logoElasticsearch\", \"logoElasticStack\", \"logoEnterpriseSearch\", \"logoEtcd\", \"logoGCP\", \"logoGCPMono\", \"logoGithub\", \"logoGmail\", \"logoGolang\", \"logoGoogleG\", \"logoHAproxy\", \"logoIBM\", \"logoIBMMono\", \"logoKafka\", \"logoKibana\", \"logoKubernetes\", \"logoLogging\", \"logoLogstash\", \"logoMaps\", \"logoMemcached\", \"logoMetrics\", \"logoMongodb\", \"logoMySQL\", \"logoNginx\", \"logoObservability\", \"logoOsquery\", \"logoPhp\", \"logoPostgres\", \"logoPrometheus\", \"logoRabbitmq\", \"logoRedis\", \"logoSecurity\", \"logoSiteSearch\", \"logoSketch\", \"logoSlack\", \"logoUptime\", \"logoWebhook\", \"logoWindows\", \"logoWorkplaceSearch\", \"logstashFilter\", \"logstashIf\", \"logstashInput\", \"logstashOutput\", \"logstashQueue\", \"machineLearningApp\", \"magnet\", \"magnifyWithMinus\", \"magnifyWithPlus\", \"managementApp\", \"mapMarker\", \"memory\", \"menu\", \"menuDown\", \"menuLeft\", \"menuRight\", \"menuUp\", \"merge\", \"metricbeatApp\", \"metricsApp\", \"minimize\", \"minus\", \"minusInCircle\", \"minusInCircleFilled\", \"monitoringApp\", \"moon\", \"nested\", \"node\", \"notebookApp\", \"number\", \"offline\", \"online\", \"outlierDetectionJob\", \"package\", \"packetbeatApp\", \"pageSelect\", \"pagesSelect\", \"partial\", \"paperClip\", \"pause\", \"pencil\", \"pin\", \"pinFilled\", \"pipelineApp\", \"play\", \"plus\", \"plusInCircle\", \"plusInCircleFilled\", \"popout\", \"push\", \"questionInCircle\", \"quote\", \"recentlyViewedApp\", \"refresh\", \"regressionJob\", \"reporter\", \"reportingApp\", \"returnKey\", \"save\", \"savedObjectsApp\", \"scale\", \"search\", \"searchProfilerApp\", \"securityAnalyticsApp\", \"securityApp\", \"securitySignal\", \"securitySignalDetected\", \"securitySignalResolved\", \"shard\", \"share\", \"snowflake\", \"sortable\", \"sortDown\", \"sortLeft\", \"sortRight\", \"sortUp\", \"spacesApp\", \"sqlApp\", \"starEmpty\", \"starEmptySpace\", \"starFilled\", \"starFilledSpace\", \"starMinusEmpty\", \"starMinusFilled\", \"starPlusEmpty\", \"starPlusFilled\", \"stats\", \"stop\", \"stopFilled\", \"stopSlash\", \"storage\", \"string\", \"submodule\", \"swatchInput\", \"symlink\", \"tableOfContents\", \"tableDensityExpanded\", \"tableDensityCompact\", \"tableDensityNormal\", \"tag\", \"tear\", \"temperature\", \"timeline\", \"timelionApp\", \"training\", \"trash\", \"upgradeAssistantApp\", \"uptimeApp\", \"unfold\", \"unlink\", \"user\", \"users\", \"usersRolesApp\", \"vector\", \"videoPlayer\", \"visArea\", \"visAreaStacked\", \"visBarHorizontal\", \"visBarHorizontalStacked\", \"visBarVertical\", \"visBarVerticalStacked\", \"visGauge\", \"visGoal\", \"visLine\", \"visMapCoordinate\", \"visMapRegion\", \"visMetric\", \"visPie\", \"visTable\", \"visTagCloud\", \"visText\", \"visTimelion\", \"visualizeApp\", \"visVega\", \"visVisualBuilder\", \"watchesApp\", \"workplaceSearchApp\", \"wrench\", \"tokenClass\", \"tokenProperty\", \"tokenEnum\", \"tokenVariable\", \"tokenMethod\", \"tokenAnnotation\", \"tokenException\", \"tokenInterface\", \"tokenParameter\", \"tokenField\", \"tokenElement\", \"tokenFunction\", \"tokenBoolean\", \"tokenString\", \"tokenArray\", \"tokenNumber\", \"tokenConstant\", \"tokenObject\", \"tokenEvent\", \"tokenKey\", \"tokenNull\", \"tokenStruct\", \"tokenPackage\", \"tokenOperator\", \"tokenEnumMember\", \"tokenRepo\", \"tokenSymbol\", \"tokenFile\", \"tokenModule\", \"tokenNamespace\", \"tokenDate\", \"tokenIP\", \"tokenNested\", \"tokenAlias\", \"tokenShape\", \"tokenGeo\", \"tokenRange\", \"tokenBinary\", \"tokenJoin\", \"tokenPercolator\", \"tokenFlattened\", \"tokenRankFeature\", \"tokenRankFeatures\", \"tokenKeyword\", \"tokenCompletionSuggester\", \"tokenDenseVector\", \"tokenText\", \"tokenTokenCount\", \"tokenSearchType\", \"tokenHistogram\"]).isRequired, PropTypes.string.isRequired, PropTypes.elementType.isRequired]).isRequired\n    }).isRequired,\n    helpText: PropTypes.node,\n    formatting: PropTypes.shape({\n      prefix: PropTypes.string,\n      suffix: PropTypes.string,\n      blockPrefix: PropTypes.string,\n      blockSuffix: PropTypes.string,\n      multiline: PropTypes.bool,\n      replaceNext: PropTypes.string,\n      prefixSpace: PropTypes.bool,\n      scanFor: PropTypes.string,\n      surroundWithNewlines: PropTypes.bool,\n      orderedList: PropTypes.bool,\n      trimFirst: PropTypes.bool\n    }),\n    editor: PropTypes.elementType\n  }).isRequired),\n\n  /** errors to bubble up */\n  errors: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.any.isRequired, PropTypes.any.isRequired]).isRequired),\n\n  /** callback triggered when parsing results are available */\n  onParse: PropTypes.func,\n\n  /** initial display mode for the editor */\n  initialViewMode: PropTypes.oneOfType([PropTypes.any.isRequired, PropTypes.any.isRequired]),\n\n  /** array defining any drag&drop handlers */\n  dropHandlers: PropTypes.arrayOf(PropTypes.shape({\n    supportedFiles: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n    accepts: PropTypes.func.isRequired,\n    getFormattingForItem: PropTypes.func.isRequired\n  }).isRequired)\n};\nEuiMarkdownEditor.displayName = 'EuiMarkdownEditor';"]},"metadata":{},"sourceType":"module"}